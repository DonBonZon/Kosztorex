(this.webpackJsonpkosztorex=this.webpackJsonpkosztorex||[]).push([[0],{16:function(e,n){e.exports=require("electron")},39:function(e,n){e.exports=require("fs")},53:function(e,n,t){e.exports=t(68)},67:function(e,n,t){},68:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),o=t(9),r=t.n(o),s=t(76),c=t(52),d=t(6),l="SHOW_CALCULATOR_SCREEN",u="SHOW_WORKERS_SCREEN",p="SHOW_EDITION_SCREEN",m=function(){return{type:l}},f=function(){return{type:p}};var I=function(){var e=Object(d.c)();return i.a.createElement(s.a,{bg:"dark",variant:"dark",id:"navbarWrapper"},i.a.createElement(s.a.Brand,{href:"#1"},"Kosztorex"),i.a.createElement(c.a,{className:"mr-auto",defaultActiveKey:"#1"},i.a.createElement(c.a.Link,{href:"#1",onClick:function(){return e(m())}},"Kalkulator"),i.a.createElement(c.a.Link,{href:"#2",onClick:function(){return e(f())}},"Edycja pozycji")))},E=t(30),g=t.n(E),x=t(48),b=t(78),O=t(73),h=t(74),N=t(75),v=t(71),T=t(72),C=t(49),_="ADD_DEPARTMENT",D="ADD_DEPARTMENT_WITH_DB",y="RESET_DEPARTMENTS",j="DELETE_DEPARTMENT",S="EDIT_DEPARTMENT_NAME",P="ADD_POSITION_TO_DEPARTMENT",A="ADD_POSITION_TO_DEPARTMENT_WITH_DB",k="RESET_POSITIONS_IN_DEPARTMENT",L="DELETE_POSITION_IN_DEPARTMENT",w="EDIT_POSITION_NAME_IN_DEPARTMENT",R="EDIT_POSITION_COUNT_IN_DEPARTMENT",W="EDIT_POSITION_PRICE_IN_DEPARTMENT",M="EDIT_POSITION_UNIT_IN_DEPARTMENT",F="DELETE_POSITION_IN_DEPARTMENT_WITH_DB",H="MOVE_POSITION_TO_ANOTHER_DEPARTMENT",z="EDIT_POSITION_NAME_IN_DEPARTMENT_WTIH_DB",B="EDIT_POSITION_PRICE_IN_DEPARTMENT_WITH_DB",U="EDIT_POSITION_UNIT_IN_DEPARTMENT_WITH_DB",K="EDIT_WHOLE_POSITION_IN_DB",J="ADD_ADDITIONAL_COSTS",q="INITIALIZE_ADDITIONAL_COSTS",V="RESET_ADDITIONAL_COSTS",$="DELETE_ADDITIONAL_COST",G="EDIT_ADDITIONALCOST_NAME",Y="EDIT_ADDITIONALCOST_AMOUNT",Z="EDIT_ADDITIONALCOST_TYPE",Q="RESET_ALL_COUNTS_AND_ADDITIONAL_COSTS",X="LOAD_DEPARTMENTS_STATE_FROM_JSON",ee=function(e){return{type:_,name:e}},ne=function(e){return{type:_,name:e}},te=function(e,n,t,a,i){return{type:P,name:n,unit:t,price:a,departmentIndex:e,id:i}},ae=function(e,n,t,a,i){return{type:A,name:n,unit:t,price:a,departmentIndex:e,departmentName:i}},ie=function(e){return{type:j,departmentIndex:e}},oe=function(e,n,t){return{type:R,departmentIndex:e,positionIndex:n,count:t}},re=function(e,n,t){return{type:w,departmentIndex:e,positionIndex:n,name:t}},se=function(e,n,t){return{type:W,departmentIndex:e,positionIndex:n,price:t}},ce=function(e,n,t){return{type:M,departmentIndex:e,positionIndex:n,unit:t}},de=function(e,n,t){return{type:F,departmentIndex:e,positionIndex:n,id:t}},le=function(e,n,t){return{type:H,oldDepartmentIndex:e,newDepartmentIndex:n,positionIndex:t}},ue=function(e,n,t,a,i){return{type:K,department:n,name:t,unit:a,price:i,id:e}},pe=function(e,n){return{type:J,departmentIndex:e,positionIndex:n}},me=function(e,n){return{type:q,departmentIndex:e,positionIndex:n}},fe=function(e,n){return{type:V,departmentIndex:e,positionIndex:n}},Ie=function(e,n,t){return{type:$,departmentIndex:e,positionIndex:n,additionalCostIndex:t}},Ee=function(e,n,t,a){return{type:G,departmentIndex:e,positionIndex:n,additionalCostIndex:t,name:a}},ge=function(e,n,t,a){return{type:Y,departmentIndex:e,positionIndex:n,additionalCostIndex:t,amount:a}},xe=function(e,n,t,a){return{type:Z,departmentIndex:e,positionIndex:n,additionalCostIndex:t,calculationType:a}},be=function(){return{type:Q}},Oe=function(e){return{type:X,json:e}};var he=function(e){var n=e.positionIndex,t=e.parentIndex,a=e.additionalCostIndex,o=e.additionalCostsCount,r=e.additionCostData,s=e.getSumWithoutAdditional,c=Object(d.c)(),l=function(e){c(xe(t,n,a,e.target.value))};return i.a.createElement("tr",null,i.a.createElement("td",{className:"align-middle additionalCostHelper"},""!==r.name&&0===r.amount?"brak warto\u015bci":""===r.name&&0!==r.amount?"brak nazwy":void 0),i.a.createElement("td",{className:"align-middle",colSpan:2},i.a.createElement(C.a,{placeholder:"Dodatkowe koszta",value:r.name,onChange:function(e){return c(Ee(t,n,a,e.target.value))}})),i.a.createElement("td",{className:"align-middle",colSpan:2},i.a.createElement("div",{className:"spaceAround"},i.a.createElement(N.a.Check,{inline:!0,label:"Kwota",type:"radio",name:"CheckBox"+t+n+a,value:"amount",checked:"amount"===r.calculationType,onChange:function(e){return l(e)}}),i.a.createElement(N.a.Check,{inline:!0,label:"% od kwoty",type:"radio",name:"CheckBox"+t+n+a,value:"percentage",checked:"percentage"===r.calculationType,onChange:function(e){return l(e)}}))),i.a.createElement("td",{className:"align-middle"},i.a.createElement("div",{className:"marginLeft80"},i.a.createElement(v.a,{id:"additionalCost"},i.a.createElement(v.a.Prepend,null,i.a.createElement(T.a,{onClick:function(){r.amount>0&&c(ge(t,n,a,r.amount-1))},variant:"outline-secondary"},"-")),i.a.createElement(C.a,{placeholder:"amount"===r.calculationType?"PLN":"%",value:0===r.amount?"":r.amount,onChange:function(e){return function(e){var i=e.target.value;""===i&&(i=0),/^\d*\.?\d{0,2}?$/.test(i)&&c(ge(t,n,a,parseInt(i)))}(e)}}),i.a.createElement(v.a.Append,null,i.a.createElement(T.a,{onClick:function(){return c(ge(t,n,a,parseFloat(r.amount.toString())+1))},variant:"outline-secondary"},"+"))))),i.a.createElement("td",{className:"align-middle"},i.a.createElement("div",{className:"additionalCostIconWrapper"},o-1===a&&i.a.createElement("i",{className:"fa fa-plus-square fa-2x",onClick:function(){c(pe(t,n))}}),o-1!==a&&i.a.createElement("i",{className:"fa fa-minus-square fa-2x",onClick:function(){return c(Ie(t,n,a))}}),i.a.createElement(N.a.Label,{className:"additionalCostLabel"},"+ "+(""!==r.name&&0!==r.amount?"amount"===r.calculationType?r.amount:s()*r.amount/100:0)+" PLN"))))};var Ne=function(e){var n=e.positionData,t=e.positionIndex,a=e.parentIndex,o=e.calcualteAdditionalCosts,r=Object(d.c)(),s=function(){return n.count*n.price};return i.a.createElement(i.a.Fragment,null,i.a.createElement("tr",null,i.a.createElement("td",{className:"cellWithLabel align-middle"},i.a.createElement(N.a.Label,{id:"nameLabel"},n.name)),i.a.createElement("td",{className:"cellWithInputs align-middle"},i.a.createElement(v.a,null,i.a.createElement(v.a.Prepend,{id:"count"},i.a.createElement(T.a,{onClick:function(){n.count>0&&r(oe(a,t,n.count-1))},variant:"outline-secondary"},"-")),i.a.createElement(C.a,{onChange:function(e){return function(e){var n=e.target.value;""===n&&(n=0),/^\d*$/.test(n)&&r(oe(a,t,parseInt(n)))}(e)},value:n.count}),i.a.createElement(v.a.Append,null,i.a.createElement(T.a,{onClick:function(){return r(oe(a,t,n.count+1))},variant:"outline-secondary"},"+")))),i.a.createElement("td",{className:"cellWithUnit align-middle"},i.a.createElement(N.a.Label,null,n.unit)),i.a.createElement("td",{className:"cellWithInputs align-middle"},i.a.createElement(v.a,{id:"price"},i.a.createElement(v.a.Prepend,null,i.a.createElement(T.a,{onClick:function(){n.price>0&&r(se(a,t,n.price-1))},variant:"outline-secondary"},"-")),i.a.createElement(C.a,{onChange:function(e){return function(e){var n=e.target.value;""===n?n=0:"0"===n[0]&&(n=n.slice(1)),/^\d*\.?\d{0,2}?$/.test(n)&&r(se(a,t,n))}(e)},value:n.price}),i.a.createElement(v.a.Append,null,i.a.createElement(T.a,{onClick:function(){return r(se(a,t,parseFloat(n.price.toString())+1))},variant:"outline-secondary"},"+")))),i.a.createElement("td",{className:"align-middle"},i.a.createElement(N.a.Label,null,"PLN")),i.a.createElement("td",{className:"align-middle cellWithCheckbox"},i.a.createElement(N.a.Check,{className:"marginLeft80",label:"dodatkowe koszta",type:"switch",onChange:function(e){return function(e){e.target.checked?r(me(a,t)):r(fe(a,t))}(e)},checked:void 0!==n.addionalCosts,id:n.id})),i.a.createElement("td",{className:"cellWithLabel align-middle"},i.a.createElement(N.a.Label,{id:"sumLabel"},void 0===n.addionalCosts?s()+" PLN":s()+" PLN (+"+o(a,t)+" PLN)"))),void 0!==n.addionalCosts&&n.addionalCosts.map((function(e,o){return i.a.createElement(he,{key:o,positionIndex:t,parentIndex:a,additionalCostIndex:o,additionalCostsCount:n.addionalCosts.length,additionCostData:e,getSumWithoutAdditional:s})})))};var ve=function(e){return i.a.createElement("div",{id:"bottomBarWrapper"},i.a.createElement("div",{className:"verticalyCenter"},i.a.createElement(T.a,{id:"generatePdfButton",variant:"danger",onClick:function(){return e.generetePdf()}},"Generuj pdf"),i.a.createElement("span",{id:"wholeSumLabel"},"Suma: ",e.getWholeSum()," PLN")))},Te=t(50),Ce=t(51);var _e=function(){var e=Object(d.d)((function(e){return e.departments})),n=function(n){for(var t=0,i=0;i<e[n].positions.length;i++)0!==e[n].positions[i].price&&0!==e[n].positions[i].count&&(t+=e[n].positions[i].price*e[n].positions[i].count,void 0!==e[n].positions[i].addionalCosts&&(t+=a(n,i)));return t},a=function(n,t){for(var a=0,i=e[n].positions[t].addionalCosts,o=0;o<i.length;o++)0!==i[o].amount&&""!==i[o].name&&("amount"===i[o].calculationType?a+=i[o].amount:a+=e[n].positions[t].price*e[n].positions[t].count*i[o].amount/100);return a},o=function(){for(var n=0,t=0;t<e.length;t++)for(var i=0;i<e[t].positions.length;i++)0!==e[t].positions[i].price&&0!==e[t].positions[i].count&&(n+=e[t].positions[i].price*e[t].positions[i].count,void 0!==e[t].positions[i].addionalCosts&&(n+=a(t,i)));return+n.toFixed(2)};return i.a.createElement("div",{id:"calculatorScreenWrapper"},i.a.createElement(b.a,{className:"tab"},e.map((function(e,n){return i.a.createElement(O.a,{key:n,title:e.name,eventKey:e.name},i.a.createElement("h1",{id:"headerDepartmentName"}," ",e.name," "),i.a.createElement(h.a,{borderless:!0},i.a.createElement("tbody",null,e.positions.map((function(e,t){return i.a.createElement(Ne,{key:t,positionData:e,parentIndex:n,positionIndex:t,calcualteAdditionalCosts:a})})))))}))),i.a.createElement(ve,{getWholeSum:o,generetePdf:function(){var a=t(39),i=t(16).remote.dialog;window.pdfMake.vfs=Te.pdfMake.vfs;for(var r=[],s=function(t){for(var a=!1,i=[],o=function(o){0!==e[t].positions[o].count&&(a||(r.push({text:e[t].name,style:"departmentHeader"}),i.push([{text:"Nazwa us\u0142ugi",style:"tableHeader"},{text:"Ilo\u015b\u0107",style:"tableHeader"},{text:"jm",style:"tableHeader"},{text:"Cena",style:"tableHeader"},{text:"Dodatkowe koszta",style:"tableHeader"},{text:"Suma",style:"tableHeader"}]),a=!0),i.push([e[t].positions[o].name,e[t].positions[o].count,e[t].positions[o].unit,e[t].positions[o].price,void 0!==e[t].positions[o].addionalCosts?{layout:"noBorders",table:{body:e[t].positions[o].addionalCosts.filter((function(e){return""!==e.name&&0!==e.amount})).map((function(n){return[n.name+":","amount"===n.calculationType?n.amount+" PLN":n.amount*e[t].positions[o].price*e[t].positions[o].count/100+" PLN"]}))}}:"0",void 0!==e[t].positions[o].addionalCosts?(e[t].positions[o].addionalCosts.filter((function(e){return""!==e.name&&0!==e.amount})).map((function(n){return"amount"===n.calculationType?n.amount:n.amount*e[t].positions[o].price*e[t].positions[o].count/100})).reduce((function(e,n){return e+n}),0)+e[t].positions[o].price*e[t].positions[o].count).toFixed(2):(e[t].positions[o].price*e[t].positions[o].count).toFixed(2)])),o===e[t].positions.length-1&&a&&(r.push({table:{headerRows:1,widths:["*","auto","auto","auto","auto","auto"],body:i}}),r.push({text:"Suma: "+n(t).toFixed(2)+" PLN",alignment:"right",style:"departmentSumLabel"}))},s=0;s<e[t].positions.length;s++)o(s)},c=0;c<e.length;c++)s(c);r.push({text:"\u0141\u0105cznie: "+o().toFixed(2)+" PLN",alignment:"right",style:"wholeSumLabel"});var d={content:r,styles:{tableHeader:{bold:!0,fontSize:13,color:"black"},departmentHeader:{bold:!0,fontSize:18,color:"black"},wholeSumLabel:{bold:!0,fontSize:15,color:"black",marginTop:40},departmentSumLabel:{fontSize:12,marginTop:5}}};Ce.createPdf(d).getBlob(function(){var e=Object(x.a)(g.a.mark((function e(n){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Buffer,e.next=3,n.arrayBuffer();case 3:e.t1=e.sent,t=e.t0.from.call(e.t0,e.t1),i.showSaveDialog((function(){})).then((function(e){return e.filePath.endsWith(".pdf")?a.writeFileSync(e.filePath,t):""===e.filePath?"":a.writeFileSync(e.filePath+".pdf",t)}));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}}))},De=t(24);var ye=function(e){var n=e.department,t=e.name,o=e.unit,r=e.price,s=e.departmentIndex,c=e.positionIndex,l=e.id,u=e.deleteDepartmentIfEmpty,p=e.findDepartmentIndex,m=e.departmentLength,f=Object(a.useState)(!1),I=Object(De.a)(f,2),E=I[0],g=I[1],x=Object(a.useState)({department:n,name:t,unit:o,price:r}),b=Object(De.a)(x,2),O=b[0],h=b[1],v=Object(d.c)();return i.a.createElement("tr",null,!E&&i.a.createElement(i.a.Fragment,null,i.a.createElement("td",{className:"align-middle"},i.a.createElement(N.a.Label,{id:"nameLabel"},n)),i.a.createElement("td",{className:"align-middle"},i.a.createElement(N.a.Label,{id:"nameLabel"},t)),i.a.createElement("td",{className:"align-middle"},i.a.createElement(N.a.Label,{id:"nameLabel"},o)),i.a.createElement("td",{className:"align-middle"},i.a.createElement(N.a.Label,{id:"nameLabel"},r)),i.a.createElement("td",{className:"align-middle editionIconsRow"},i.a.createElement("i",{className:"fa fa-edit editIcon",onClick:function(){return g(!0)}}),i.a.createElement("i",{className:"fa fa-trash deleteIcon",onClick:function(){return v(de(s,c,l)),void u(s)}}))),E&&i.a.createElement(i.a.Fragment,null,i.a.createElement("td",{className:"align-middle"},i.a.createElement(C.a,{as:"textarea",defaultValue:n,onChange:function(e){return function(e){var n=e.target.value;h((function(e){return Object.assign({},e,{department:n})}))}(e)}})),i.a.createElement("td",{className:"align-middle"},i.a.createElement(C.a,{as:"textarea",defaultValue:t,onChange:function(e){return function(e){var n=e.target.value;h((function(e){return Object.assign({},e,{name:n})}))}(e)}})),i.a.createElement("td",{className:"align-middle"},i.a.createElement(C.a,{as:"textarea",defaultValue:o,onChange:function(e){return function(e){var n=e.target.value;h((function(e){return Object.assign({},e,{unit:n})}))}(e)}})),i.a.createElement("td",{className:"align-middle"},i.a.createElement(C.a,{as:"textarea",defaultValue:r,onChange:function(e){return function(e){var n=e.target.value;h((function(e){return Object.assign({},e,{price:parseFloat(parseFloat(n).toFixed(2))})}))}(e)}})),i.a.createElement("td",{className:"align-middle"},i.a.createElement("i",{className:"fa fa-check-square  fa-2x acceptEditIcon",onClick:function(){return function(){if(g(!1),t!==O.name&&v(re(s,c,O.name)),o!==O.unit&&v(ce(s,c,O.unit)),r!==O.price&&v(se(s,c,O.price)),n!==O.department){var e=p(O.department);-1===e?(v(ee(O.department)),v(le(s,m,c))):v(le(s,e,c)),u(s)}v(ue(l,O.department,O.name,O.unit,O.price))}()}}))))};var je=function(){var e=Object(d.d)((function(e){return e.departments})),n=Object(d.c)(),t=Object(a.useState)({department:"",name:"",unit:"",price:0}),o=Object(De.a)(t,2),r=o[0],s=o[1],c=function(t){1===e[t].positions.length&&n(ie(t))},l=function(n){return e.findIndex((function(e){return e.name===n}))};return i.a.createElement(h.a,{borderless:!0,style:{marginTop:"50px"}},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{colSpan:5},i.a.createElement(N.a.Label,{className:"align-middle textInTable"},"Dodawanie pozycji"))),i.a.createElement("tr",null,i.a.createElement("td",{className:"align-middle"},i.a.createElement(C.a,{placeholder:"Dzia\u0142",name:"DepartmentInput",onChange:function(e){return function(e){var n=e.target.value;s((function(e){return Object.assign({},e,{department:n})}))}(e)}})),i.a.createElement("td",{className:"align-middle"},i.a.createElement(C.a,{placeholder:"Nazwa pozycji",name:"PositionNameInput",onChange:function(e){return function(e){var n=e.target.value;s((function(e){return Object.assign({},e,{name:n})}))}(e)}})),i.a.createElement("td",{className:"align-middle"},i.a.createElement(C.a,{placeholder:"Jednostka",name:"PositionUnitInput",onChange:function(e){return function(e){var n=e.target.value;s((function(e){return Object.assign({},e,{unit:n})}))}(e)}})),i.a.createElement("td",{className:"align-middle"},i.a.createElement(C.a,{placeholder:"Cena",name:"PosiitonPriceInput",onKeyPress:function(e){var n;/^\d*\.?\d{0,2}?$/.test((n=e).key)||n.preventDefault()},onChange:function(e){return function(e){var n=e.target.value;s((function(e){return Object.assign({},e,{price:parseFloat(n)})}))}(e)}})),i.a.createElement("td",null,i.a.createElement("i",{className:"fa fa-plus-square fa-3x addIcon",onClick:function(){return function(){if(""!==r.department&&""!==r.name&&""!==r.unit&&0!==r.price){var t=e.findIndex((function(e){return e.name===r.department}));-1===t&&(n(ne(r.department)),t=e.length),n(ae(t,r.name,r.unit,r.price,r.department)),console.log("dodano")}}()}}))),i.a.createElement("tr",null,i.a.createElement("td",{colSpan:5},i.a.createElement(N.a.Label,{className:"align-middle textInTable"},"Edycja pozycji"))),e.map((function(n,t){return n.positions.map((function(a,o){return i.a.createElement(ye,{department:n.name,name:a.name,unit:a.unit,price:a.price,departmentIndex:t,positionIndex:o,id:a.id,deleteDepartmentIfEmpty:c,findDepartmentIndex:l,departmentLength:e.length})}))}))))};t(65),t(66),t(67);var Se=function(){var e=Object(d.d)((function(e){return e.activeScreen}));return i.a.createElement("div",null,i.a.createElement(I,null),e.showCalculator&&i.a.createElement(_e,null),e.showEdition&&i.a.createElement(je,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pe=t(18),Ae=t(21),ke=t(77),Le=t(16).remote.getGlobal("db"),we=[],Re=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return[].concat(Object(Ae.a)(n),[{id:Object(ke.a)(),name:t.name,positions:[]}]);case D:var a=[];if(Le.getDepartments().then((function(e){return a.push(e)})),a.includes(t.name))return[].concat(Object(Ae.a)(n),[{id:Object(ke.a)(),name:t.name,positions:[]}]);case P:return n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:[].concat(Object(Ae.a)(e.positions),[{name:t.name,unit:t.unit,price:t.price,count:0,id:t.id}])}):e}));case A:return Le.addPosition(t.departmentName,t.name,t.unit,t.price),n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:[].concat(Object(Ae.a)(e.positions),[{name:t.name,unit:t.unit,price:t.price,count:0,id:Object(ke.a)()}])}):e}));case j:return n.filter((function(e){return e!==n[t.departmentIndex]}));case L:return n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.filter((function(n){return n!==e.positions[t.positionIndex]}))}):e}));case F:return Le.deletePosition(t.id),n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.filter((function(n){return n!==e.positions[t.positionIndex]}))}):e}));case S:return n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{name:t.name}):e}));case R:return n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{count:t.count}):e}))}):e}));case w:return n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{name:t.name}):e}))}):e}));case z:return Le.changePositionName(t.id,t.name),n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{name:t.name}):e}))}):e}));case W:return n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{price:t.price}):e}))}):e}));case B:return Le.changePositionPrice(t.id,t.price),n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{price:t.price}):e}))}):e}));case M:return n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{unit:t.unit}):e}))}):e}));case U:return Le.changePositionUnit(t.id,t.unit),n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{unit:t.unit}):e}))}):e}));case k:return n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:[]}):e}));case H:var i=n[t.oldDepartmentIndex].positions[t.positionIndex],o=n.map((function(e){return e===n[t.oldDepartmentIndex]?Object.assign({},e,{positions:e.positions.filter((function(n){return n!==e.positions[t.positionIndex]}))}):e}));return o.map((function(e){return e===n[t.newDepartmentIndex]?Object.assign({},e,{positions:[].concat(Object(Ae.a)(e.positions),[i])}):e}));case K:return Le.editWholePosition(t.id,t.department,t.name,t.unit,t.price),n;case q:var r=n[t.departmentIndex].positions[t.positionIndex].addionalCosts;return void 0===(null===(e=r)||void 0===e?void 0:e.length)&&(r=[{name:"",calculationType:"amount",amount:0}]),n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{addionalCosts:r}):e}))}):e}));case V:return n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{addionalCosts:void 0}):e}))}):e}));case J:var s=n[t.departmentIndex].positions[t.positionIndex].addionalCosts;return null===s||void 0===s||s.push({name:"",calculationType:"amount",amount:0}),n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{addionalCosts:s}):e}))}):e}));case Y:var c=n[t.departmentIndex].positions[t.positionIndex].addionalCosts.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex].addionalCosts[t.additionalCostIndex]?Object.assign({},e,{amount:t.amount}):e}));return n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{addionalCosts:c}):e}))}):e}));case G:var d=n[t.departmentIndex].positions[t.positionIndex].addionalCosts.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex].addionalCosts[t.additionalCostIndex]?Object.assign({},e,{name:t.name}):e}));return n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{addionalCosts:d}):e}))}):e}));case $:var l=n[t.departmentIndex].positions[t.positionIndex].addionalCosts;return l.splice(t.additionalCostIndex,1),n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{addionalCosts:l}):e}))}):e}));case Z:var u=n[t.departmentIndex].positions[t.positionIndex].addionalCosts.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex].addionalCosts[t.additionalCostIndex]?Object.assign({},e,{calculationType:t.calculationType}):e}));return n.map((function(e){return e===n[t.departmentIndex]?Object.assign({},e,{positions:e.positions.map((function(e){return e===n[t.departmentIndex].positions[t.positionIndex]?Object.assign({},e,{addionalCosts:u}):e}))}):e}));case Q:return n.map((function(e){return Object.assign({},e,{positions:e.positions.map((function(e){return Object.assign({},e,{count:0,addionalCosts:void 0})}))})}));case y:return[];case X:return console.log(JSON.parse(t.json)),JSON.parse(t.json);default:return n}},We={showCalculator:!0,showWorkers:!1,showEdition:!1},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case l:return{showCalculator:!0,showWorkers:!1,showEdition:!1};case u:return{showCalculator:!1,showWorkers:!0,showEdition:!1};case p:return{showCalculator:!1,showWorkers:!1,showEdition:!0};default:return e}},Fe=Object(Pe.b)({departments:Re,activeScreen:Me}),He=t(16).remote.getGlobal("db"),ze=t(16).ipcRenderer;ze.on("newFile",(function(){Be.dispatch(be())})),ze.on("saveFile",(function(){var e=t(39);t(16).remote.dialog.showSaveDialog((function(){})).then((function(n){return n.filePath.endsWith(".json")?e.writeFileSync(n.filePath,Be):""===n.filePath?"":e.writeFileSync(n.filePath+".json",JSON.stringify(Be.getState().departments))}))})),ze.on("openFile",(function(){var e=t(39);t(16).remote.dialog.showOpenDialog({filters:[{name:"Kosztorex",extensions:["json"]},{name:"All Files",extensions:["*"]}]}).then((function(n){if(!n.canceled){var t=e.readFileSync(n.filePaths[0]);Be.dispatch(Oe(t))}}))}));var Be=Object(Pe.c)(Fe);He.populatePositionsIfEmpty().then((function(){return He.getSortedPositions().then((function(e){return function(e){var n=Object.keys(e);Object(d.b)((function(){n.forEach((function(n,t){Be.dispatch(ee(n)),e[n].forEach((function(e){return Be.dispatch(te(t,e.name,e.unit,e.price,e._id))}))}))}))}(e)}))})),r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(d.a,{store:Be},i.a.createElement(Se,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.95fb6143.chunk.js.map