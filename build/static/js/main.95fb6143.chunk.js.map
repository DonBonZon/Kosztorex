{"version":3,"sources":["../external \"electron\"","../external \"fs\"","types/activeScreenTypes.ts","actions/activeScreenActions.ts","components/NavigationBar.tsx","types/departmentsTypes.ts","actions/departmentsActions.ts","components/additionalCost.tsx","components/SinglePosition.tsx","components/BottomBar.tsx","components/CalculatorScreen.tsx","components/SingleEditPosition.tsx","components/EditionScreen.tsx","App.tsx","serviceWorker.ts","reducers/departmentsReducer.ts","reducers/activeScreenReducer.ts","reducers/rootReducer.ts","index.tsx"],"names":["module","exports","require","type","types","NavigationBar","dispatch","useDispatch","Navbar","bg","variant","id","Brand","href","Nav","className","defaultActiveKey","Link","onClick","activeScreenActions","name","departmentIndex","unit","price","departmentName","positionIndex","count","oldDepartmentIndex","newDepartmentIndex","department","additionalCostIndex","amount","calculationType","json","AdditionalCost","parentIndex","additionalCostsCount","additionCostData","getSumWithoutAdditional","handleRadioButtons","event","departmentsActions","target","value","colSpan","FormControl","placeholder","onChange","Form","Check","inline","label","checked","InputGroup","Prepend","Button","evt","text","test","parseInt","validateAndUpdateAmount","Append","parseFloat","toString","Label","SinglePosition","positionData","calcualteAdditionalCosts","validateAndUpdateCount","slice","validateAndUpdatePrice","handleCheckBoxChange","undefined","addionalCosts","map","key","length","BottomBar","props","generetePdf","getWholeSum","PositionsTabs","state","useSelector","departments","getDepartmentSum","sum","i","positions","additionalCosts","j","toFixed","Tabs","item","index","Tab","title","eventKey","Table","borderless","position","fs","dialog","remote","window","pdfMake","vfs","pdfFonts","docContnet","headerAdded","tableRows","push","style","layout","table","body","filter","aditionalCost","addionalCost","reduce","a","b","headerRows","widths","alignment","docDefinition","content","styles","tableHeader","bold","fontSize","color","departmentHeader","wholeSumLabel","marginTop","departmentSumLabel","getBlob","blob","Buffer","arrayBuffer","buffer","from","showSaveDialog","then","file","filePath","endsWith","writeFileSync","SingleEditPosition","deleteDepartmentIfEmpty","findDepartmentIndex","departmentLength","useState","editionActive","setEditionActivation","editedPosition","setEditedPosition","as","defaultValue","e","prevState","Object","assign","handleDepartmentNameEdition","handleNameEdition","handleUnitEdition","handlePriceEdition","handleWholeEdition","EditionScreen","inputs","setInputs","deleteEmptyDepartment","findIndex","handleDepartmentInput","handleNameInput","handleUnitInput","onKeyPress","preventDefault","handlePriceInput","console","log","addPosition","idx","App","activeScreen","showCalculator","CalculatorScreen","showEdition","Boolean","location","hostname","match","dbInstance","getGlobal","INITIAL_STATE","departmentReducer","action","uuidv4","deparments","getDepartments","includes","deletePosition","changePositionName","changePositionPrice","changePositionUnit","postion","newPositions","editWholePosition","newAdditionalCosts","additionCostWithUpdatedPrice","additionalCost","additionCostWithUpdatedName","additionCostWithDeletedItem","splice","additionCostWithUpdatedType","JSON","parse","showWorkers","activeScreenReducer","rootReducer","combineReducers","departmentsReducer","ipcRenderer","on","store","stringify","getState","showOpenDialog","filters","extensions","canceled","data","readFileSync","filePaths","createStore","populatePositionsIfEmpty","getSortedPositions","keys","batch","forEach","_id","convertPositionsToState","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.95fb6143.chunk.js","sourcesContent":["module.exports = require(\"electron\");","module.exports = require(\"fs\");","const SHOW_CALCULATOR_SCREEN = \"SHOW_CALCULATOR_SCREEN\";\r\nconst SHOW_WORKERS_SCREEN = \"SHOW_WORKERS_SCREEN\";\r\nconst SHOW_EDITION_SCREEN = \"SHOW_EDITION_SCREEN\";\r\n\r\nexport default {\r\n\tSHOW_CALCULATOR_SCREEN,\r\n\tSHOW_WORKERS_SCREEN,\r\n\tSHOW_EDITION_SCREEN,\r\n};\r\n","import types from \"../types/activeScreenTypes\";\r\n\r\n\r\nconst show_calculator_screen = () => ({\r\n  type: types.SHOW_CALCULATOR_SCREEN\r\n});\r\n\r\nconst show_workers_screen = () => ({\r\n  type: types.SHOW_WORKERS_SCREEN,\r\n});\r\n\r\nconst show_edition_screen = () => ({\r\n  type: types.SHOW_EDITION_SCREEN,\r\n});\r\n\r\n\r\nexport default {\r\n  show_calculator_screen,\r\n  show_workers_screen,\r\n  show_edition_screen,\r\n}\r\n  ","import React from 'react';\r\nimport { Nav ,Navbar} from 'react-bootstrap';\r\nimport  {useDispatch} from 'react-redux'\r\nimport activeScreenActions from '../actions/activeScreenActions';\r\n\r\nfunction NavigationBar() {\r\n    const dispatch = useDispatch()\r\n\r\n    return (\r\n      <Navbar bg=\"dark\" variant=\"dark\" id=\"navbarWrapper\">\r\n      <Navbar.Brand href=\"#1\">Kosztorex</Navbar.Brand>\r\n      <Nav className=\"mr-auto\" defaultActiveKey=\"#1\">\r\n        <Nav.Link href=\"#1\" onClick={()=>dispatch(activeScreenActions.show_calculator_screen())}>Kalkulator</Nav.Link>\r\n        <Nav.Link href=\"#2\" onClick={()=>dispatch(activeScreenActions.show_edition_screen())}>Edycja pozycji</Nav.Link>\r\n      </Nav>\r\n    </Navbar>\r\n    );\r\n  }\r\n  \r\n  export default NavigationBar;","const ADD_DEPARTMENT = \"ADD_DEPARTMENT\";\r\nconst ADD_DEPARTMENT_WITH_DB = \"ADD_DEPARTMENT_WITH_DB\";\r\nconst ADD_POSITION_TO_DEPARTMENT = \"ADD_POSITION_TO_DEPARTMENT\"\r\nconst ADD_POSITION_TO_DEPARTMENT_WITH_DB = \"ADD_POSITION_TO_DEPARTMENT_WITH_DB\"\r\nconst RESET_DEPARTMENTS = \"RESET_DEPARTMENTS\"\r\nconst DELETE_DEPARTMENT = \"DELETE_DEPARTMENT\"\r\nconst DELETE_DEPARTMENT_WITH_DB = \"DELETE_DEPARTMENT_WITH_DB\"\r\nconst EDIT_DEPARTMENT_NAME = \"EDIT_DEPARTMENT_NAME\"\r\nconst RESET_POSITIONS_IN_DEPARTMENT = \"RESET_POSITIONS_IN_DEPARTMENT\"\r\nconst DELETE_POSITION_IN_DEPARTMENT = \"DELETE_POSITION_IN_DEPARTMENT\"\r\nconst EDIT_POSITION_NAME_IN_DEPARTMENT = \"EDIT_POSITION_NAME_IN_DEPARTMENT\"\r\nconst EDIT_POSITION_NAME_IN_DEPARTMENT_WTIH_DB = \"EDIT_POSITION_NAME_IN_DEPARTMENT_WTIH_DB\"\r\nconst EDIT_POSITION_COUNT_IN_DEPARTMENT = \"EDIT_POSITION_COUNT_IN_DEPARTMENT\"\r\nconst EDIT_POSITION_PRICE_IN_DEPARTMENT = \"EDIT_POSITION_PRICE_IN_DEPARTMENT\"\r\nconst EDIT_POSITION_PRICE_IN_DEPARTMENT_WITH_DB = \"EDIT_POSITION_PRICE_IN_DEPARTMENT_WITH_DB\"\r\nconst EDIT_POSITION_UNIT_IN_DEPARTMENT = \"EDIT_POSITION_UNIT_IN_DEPARTMENT\"\r\nconst EDIT_POSITION_UNIT_IN_DEPARTMENT_WITH_DB = \"EDIT_POSITION_UNIT_IN_DEPARTMENT_WITH_DB\"\r\nconst DELETE_POSITION_IN_DEPARTMENT_WITH_DB = \"DELETE_POSITION_IN_DEPARTMENT_WITH_DB\"\r\nconst MOVE_POSITION_TO_ANOTHER_DEPARTMENT = \"MOVE_POSITION_TO_ANOTHER_DEPARTMENT\"\r\nconst EDIT_WHOLE_POSITION_IN_DB = \"EDIT_WHOLE_POSITION_IN_DB\"\r\nconst INITIALIZE_ADDITIONAL_COSTS = \"INITIALIZE_ADDITIONAL_COSTS\"\r\nconst ADD_ADDITIONAL_COSTS = \"ADD_ADDITIONAL_COSTS\"\r\nconst RESET_ADDITIONAL_COSTS = \"RESET_ADDITIONAL_COSTS\"\r\nconst DELETE_ADDITIONAL_COST = \"DELETE_ADDITIONAL_COST\"\r\nconst EDIT_ADDITIONALCOST_NAME = \"EDIT_ADDITIONALCOST_NAME\"\r\nconst EDIT_ADDITIONALCOST_AMOUNT = \"EDIT_ADDITIONALCOST_AMOUNT\"\r\nconst EDIT_ADDITIONALCOST_TYPE = \"EDIT_ADDITIONALCOST_TYPE\"\r\nconst RESET_ALL_COUNTS_AND_ADDITIONAL_COSTS = \"RESET_ALL_COUNTS_AND_ADDITIONAL_COSTS\"\r\nconst LOAD_DEPARTMENTS_STATE_FROM_JSON =\"LOAD_DEPARTMENTS_STATE_FROM_JSON\"\r\nexport default {\r\n  ADD_DEPARTMENT,\r\n  ADD_DEPARTMENT_WITH_DB,\r\n  RESET_DEPARTMENTS,\r\n  DELETE_DEPARTMENT,\r\n  DELETE_DEPARTMENT_WITH_DB,\r\n  EDIT_DEPARTMENT_NAME,\r\n  ADD_POSITION_TO_DEPARTMENT,\r\n  ADD_POSITION_TO_DEPARTMENT_WITH_DB,\r\n  RESET_POSITIONS_IN_DEPARTMENT,\r\n  DELETE_POSITION_IN_DEPARTMENT,\r\n  EDIT_POSITION_NAME_IN_DEPARTMENT,\r\n  EDIT_POSITION_COUNT_IN_DEPARTMENT,\r\n  EDIT_POSITION_PRICE_IN_DEPARTMENT,\r\n  EDIT_POSITION_UNIT_IN_DEPARTMENT,\r\n  DELETE_POSITION_IN_DEPARTMENT_WITH_DB,\r\n  MOVE_POSITION_TO_ANOTHER_DEPARTMENT,\r\n  EDIT_POSITION_NAME_IN_DEPARTMENT_WTIH_DB,\r\n  EDIT_POSITION_PRICE_IN_DEPARTMENT_WITH_DB,\r\n  EDIT_POSITION_UNIT_IN_DEPARTMENT_WITH_DB,\r\n  EDIT_WHOLE_POSITION_IN_DB,\r\n  ADD_ADDITIONAL_COSTS,\r\n  INITIALIZE_ADDITIONAL_COSTS,\r\n  RESET_ADDITIONAL_COSTS,\r\n  DELETE_ADDITIONAL_COST,\r\n  EDIT_ADDITIONALCOST_NAME,\r\n  EDIT_ADDITIONALCOST_AMOUNT,\r\n  EDIT_ADDITIONALCOST_TYPE,\r\n  RESET_ALL_COUNTS_AND_ADDITIONAL_COSTS,\r\n  LOAD_DEPARTMENTS_STATE_FROM_JSON\r\n}","import types from \"../types/departmentsTypes\";\r\n\r\n\r\nconst addDepartment = (name:string) => ({\r\n  type: types.ADD_DEPARTMENT,\r\n  name,\r\n});\r\n\r\nconst addDepartmentWithDB = (name:string) => ({\r\n  type: types.ADD_DEPARTMENT,\r\n  name,\r\n});\r\n\r\nconst addPositionToDepartment = (departmentIndex:number,name:string,unit:string,price:number,id:string) => ({\r\n  type: types.ADD_POSITION_TO_DEPARTMENT,\r\n  name,\r\n  unit,\r\n  price,\r\n  departmentIndex,\r\n  id,\r\n});\r\n\r\nconst addPositionToDepartmentWithDB = (departmentIndex:number,name:string,unit:string,price:number,departmentName:string) => ({\r\n  type: types.ADD_POSITION_TO_DEPARTMENT_WITH_DB,\r\n  name,\r\n  unit,\r\n  price,\r\n  departmentIndex,\r\n  departmentName,\r\n});\r\n\r\nconst deleteDepartment = (departmentIndex:number) => ({\r\n  type: types.DELETE_DEPARTMENT,\r\n  departmentIndex,\r\n});\r\n\r\nconst deleteDepartmentWithDB = (departmentIndex:number) => ({\r\n  type: types.DELETE_DEPARTMENT,\r\n  departmentIndex,\r\n});\r\n\r\nconst deletePositionInDepartment = (departmentIndex:number,positionIndex:number) => ({\r\n  type: types.DELETE_POSITION_IN_DEPARTMENT,\r\n  departmentIndex,\r\n  positionIndex,\r\n});\r\n\r\nconst editDepartmentName = (departmentIndex:number,name:string) => ({\r\n  type: types.EDIT_DEPARTMENT_NAME,\r\n  departmentIndex,\r\n  name,\r\n});\r\n\r\nconst editPositionCountInDepartment = (departmentIndex:number,positionIndex:number,count:number) => ({\r\n  type: types.EDIT_POSITION_COUNT_IN_DEPARTMENT,\r\n  departmentIndex,\r\n  positionIndex,\r\n  count\r\n});\r\n\r\nconst editPositionNameInDepartment = (departmentIndex:number,positionIndex:number,name:string) => ({\r\n  type: types.EDIT_POSITION_NAME_IN_DEPARTMENT,\r\n  departmentIndex,\r\n  positionIndex,\r\n  name\r\n});\r\n\r\nconst editPositionPriceInDepartment = (departmentIndex:number,positionIndex:number,price:number) => ({\r\n  type: types.EDIT_POSITION_PRICE_IN_DEPARTMENT,\r\n  departmentIndex,\r\n  positionIndex,\r\n  price\r\n});\r\n\r\nconst editPositionUnitInDepartment = (departmentIndex:number,positionIndex:number,unit:string) => ({\r\n  type: types.EDIT_POSITION_UNIT_IN_DEPARTMENT,\r\n  departmentIndex,\r\n  positionIndex,\r\n  unit\r\n});\r\n\r\nconst resetPositionsInDepartment = (departmentIndex:number) => ({\r\n  type: types.RESET_POSITIONS_IN_DEPARTMENT,\r\n  departmentIndex,\r\n});\r\n\r\nconst resetDepartments = () => ({\r\n  type: types.RESET_DEPARTMENTS,\r\n});\r\n\r\nconst deletePositionInDepartmentWithDB = (departmentIndex:number,positionIndex:number,id:string) => ({\r\n  type: types.DELETE_POSITION_IN_DEPARTMENT_WITH_DB,\r\n  departmentIndex,\r\n  positionIndex,\r\n  id,\r\n});\r\n\r\nconst movePositionToAnotherDepartment = (oldDepartmentIndex: number,newDepartmentIndex: number, positionIndex: number) => ({\r\n  type: types.MOVE_POSITION_TO_ANOTHER_DEPARTMENT,\r\n  oldDepartmentIndex,\r\n  newDepartmentIndex,\r\n  positionIndex\r\n});\r\n\r\nconst editPositionNameInDepartmentWithDb = (departmentIndex:number,positionIndex:number,name:string,id:string) => ({\r\n  type: types.EDIT_POSITION_NAME_IN_DEPARTMENT_WTIH_DB,\r\n  departmentIndex,\r\n  positionIndex,\r\n  name,\r\n  id\r\n});\r\n\r\nconst editPositionUnitInDepartmentWithDb = (departmentIndex:number,positionIndex:number,unit:string,id:string) => ({\r\n  type: types.EDIT_POSITION_UNIT_IN_DEPARTMENT_WITH_DB,\r\n  departmentIndex,\r\n  positionIndex,\r\n  unit,\r\n  id\r\n});\r\n\r\nconst editPositionPriceInDepartmentWithDb = (departmentIndex: number, positionIndex: number, price: number,id:string) => ({\r\n  type: types.EDIT_POSITION_PRICE_IN_DEPARTMENT_WITH_DB,\r\n  departmentIndex,\r\n  positionIndex,\r\n  price,\r\n  id\r\n});\r\n\r\nconst editWholePositionInDb = (id: string, department: string, name: string, unit: string, price: number) => ({\r\n  type: types.EDIT_WHOLE_POSITION_IN_DB,\r\n  department,\r\n  name,\r\n  unit,\r\n  price,\r\n  id\r\n})\r\n\r\nconst addAdditionalCosts = (departmentIndex: number, positionIndex: number) => ({\r\n  type: types.ADD_ADDITIONAL_COSTS,\r\n  departmentIndex,\r\n  positionIndex,\r\n})\r\n\r\nconst initializeAdditionalCosts = (departmentIndex: number, positionIndex: number) => ({\r\n  type: types.INITIALIZE_ADDITIONAL_COSTS,\r\n  departmentIndex,\r\n  positionIndex,\r\n})\r\n\r\nconst deleteAdditionalCost = (departmentIndex: number, positionIndex: number, additionalCostIndex: number) => ({\r\n  type: types.DELETE_ADDITIONAL_COST,\r\n  departmentIndex,\r\n  positionIndex,\r\n  additionalCostIndex\r\n})\r\n\r\nconst resetAdditionalCosts = (departmentIndex: number, positionIndex: number) => ({\r\n  type: types.RESET_ADDITIONAL_COSTS,\r\n  departmentIndex,\r\n  positionIndex,\r\n})\r\n\r\nconst edditAdditionalCostName = (departmentIndex: number, positionIndex: number,additionalCostIndex:number, name: string) => ({\r\n  type: types.EDIT_ADDITIONALCOST_NAME,\r\n  departmentIndex,\r\n  positionIndex,\r\n  additionalCostIndex,\r\n  name\r\n})\r\n\r\nconst edditAdditionalCostAmount = (departmentIndex: number, positionIndex: number,additionalCostIndex:number, amount: number) => ({\r\n  type: types.EDIT_ADDITIONALCOST_AMOUNT,\r\n  departmentIndex,\r\n  positionIndex,\r\n  additionalCostIndex,\r\n  amount\r\n})\r\n\r\nconst edditAdditionalCostType = (departmentIndex: number, positionIndex: number,additionalCostIndex:number, calculationType: string) => ({\r\n  type: types.EDIT_ADDITIONALCOST_TYPE,\r\n  departmentIndex,\r\n  positionIndex,\r\n  additionalCostIndex,\r\n  calculationType,\r\n})\r\n\r\nconst resetAllPricesAndAdditionalCosts = () => ({\r\n  type: types.RESET_ALL_COUNTS_AND_ADDITIONAL_COSTS,\r\n})\r\n\r\n\r\nconst loadDepartmentsStateFromJSON = (json:string) => ({\r\n  type: types.LOAD_DEPARTMENTS_STATE_FROM_JSON,\r\n  json: json\r\n})\r\n\r\nexport default {\r\n  addDepartment,\r\n  addDepartmentWithDB,\r\n  addPositionToDepartment,\r\n  addPositionToDepartmentWithDB,\r\n  deleteDepartment,\r\n  deleteDepartmentWithDB,\r\n  deletePositionInDepartment,\r\n  editDepartmentName,\r\n  editPositionCountInDepartment,\r\n  editPositionNameInDepartment,\r\n  editPositionPriceInDepartment,\r\n  editPositionUnitInDepartment,\r\n  resetPositionsInDepartment,\r\n  resetDepartments,\r\n  deletePositionInDepartmentWithDB,\r\n  movePositionToAnotherDepartment,\r\n  editPositionNameInDepartmentWithDb,\r\n  editPositionUnitInDepartmentWithDb,\r\n  editPositionPriceInDepartmentWithDb,\r\n  editWholePositionInDb,\r\n  addAdditionalCosts,\r\n  initializeAdditionalCosts,\r\n  resetAdditionalCosts,\r\n  deleteAdditionalCost,\r\n  edditAdditionalCostName,\r\n  edditAdditionalCostAmount,\r\n  edditAdditionalCostType,\r\n  resetAllPricesAndAdditionalCosts,\r\n  loadDepartmentsStateFromJSON,\r\n}\r\n  ","import React from \"react\";\r\nimport { InputGroup, FormControl, Form, Button } from \"react-bootstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport departmentsActions from \"../actions/departmentsActions\";\r\n\r\ninterface Props {\r\n\tparentIndex: number;\r\n\tpositionIndex: number;\r\n\tadditionalCostIndex: number;\r\n\tadditionalCostsCount: number;\r\n\tadditionCostData: {\r\n\t\tname: string;\r\n\t\tcalculationType: \"amount\" | \"percentage\";\r\n\t\tamount: number;\r\n\t};\r\n\tgetSumWithoutAdditional:any\r\n}\r\n\r\nfunction AdditionalCost({\r\n\tpositionIndex,\r\n\tparentIndex,\r\n\tadditionalCostIndex,\r\n\tadditionalCostsCount,\r\n\tadditionCostData,\r\n\tgetSumWithoutAdditional\r\n}: Props) {\r\n\tconst dispatch = useDispatch();\r\n\tconst handleRadioButtons = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n\t\tdispatch(\r\n\t\t\tdepartmentsActions.edditAdditionalCostType(\r\n\t\t\t\tparentIndex,\r\n\t\t\t\tpositionIndex,\r\n\t\t\t\tadditionalCostIndex,\r\n\t\t\t\tevent.target.value\r\n\t\t\t)\r\n\t\t);\r\n\t};\r\n\r\n\tconst getAdditionalCost = () => {\r\n\t\tif (additionCostData.name !== \"\" && additionCostData.amount !== 0) {\r\n\t\treturn\tadditionCostData.calculationType === \"amount\" ? additionCostData.amount : getSumWithoutAdditional() * additionCostData.amount / 100;\r\n\t\t} else return 0 \r\n\t}\r\n\t\r\n\r\n\tconst validateAndUpdateAmount = (evt: any) => {\r\n\t\tconst regexAmount = /^\\d*\\.?\\d{0,2}?$/;\r\n\t\tlet text = evt.target.value;\r\n\t\tif (text === \"\") {\r\n\t\t\ttext = 0;\r\n\t\t}\r\n\t\tif (regexAmount.test(text)) {\r\n\t\t\tdispatch(\r\n\t\t\t\tdepartmentsActions.edditAdditionalCostAmount(\r\n\t\t\t\t\tparentIndex,\r\n\t\t\t\t\tpositionIndex,\r\n\t\t\t\t\tadditionalCostIndex,\r\n\t\t\t\t\tparseInt(text)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tconst incrementAmount = () =>\r\n\t\tdispatch(\r\n\t\t\tdepartmentsActions.edditAdditionalCostAmount(\r\n\t\t\t\tparentIndex,\r\n\t\t\t\tpositionIndex,\r\n\t\t\t\tadditionalCostIndex,\r\n\t\t\t\tparseFloat(additionCostData.amount.toString()) + 1\r\n\t\t\t)\r\n\t\t);\r\n\t\r\n\tconst decrementAmount = () => {\r\n\t\tif (additionCostData.amount > 0)\r\n\t\t\tdispatch(\r\n\t\t\t\tdepartmentsActions.edditAdditionalCostAmount(\r\n\t\t\t\t\tparentIndex,\r\n\t\t\t\t\tpositionIndex,\r\n\t\t\t\t\tadditionalCostIndex,\r\n\t\t\t\t\tadditionCostData.amount - 1\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t};\r\n\r\n\tconst helper = () => {\r\n\t  if (additionCostData.name !== \"\" && additionCostData.amount === 0) {\r\n\t\t\treturn \"brak wartości\"\r\n\t\t} else if (additionCostData.name === \"\" && additionCostData.amount !== 0) {\r\n\t\t\treturn \"brak nazwy\"\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<tr>\r\n\t\t\t<td className=\"align-middle additionalCostHelper\">{ helper() }</td>\r\n\t\t\t<td className=\"align-middle\" colSpan={2}>\r\n\t\t\t\t<FormControl\r\n\t\t\t\t\tplaceholder=\"Dodatkowe koszta\"\r\n\t\t\t\t\tvalue={additionCostData.name}\r\n\t\t\t\t\tonChange={(event) =>\r\n\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\tdepartmentsActions.edditAdditionalCostName(\r\n\t\t\t\t\t\t\t\tparentIndex,\r\n\t\t\t\t\t\t\t\tpositionIndex,\r\n\t\t\t\t\t\t\t\tadditionalCostIndex,\r\n\t\t\t\t\t\t\t\tevent.target.value\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t</td>\r\n\r\n\t\t\t<td className=\"align-middle\" colSpan={2}>\r\n\t\t\t\t<div className=\"spaceAround\">\r\n\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\tinline\r\n\t\t\t\t\t\tlabel=\"Kwota\"\r\n\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\tname={\r\n\t\t\t\t\t\t\t\"CheckBox\" + parentIndex + positionIndex + additionalCostIndex\r\n\t\t\t\t\t\t} //taka nazwa daje pewnosc ze name dla kazdego dodatkowego kosztu sie nie powt.\r\n\t\t\t\t\t\tvalue=\"amount\"\r\n\t\t\t\t\t\tchecked={additionCostData.calculationType === \"amount\"}\r\n\t\t\t\t\t\tonChange={(event: React.ChangeEvent<HTMLInputElement>) =>\r\n\t\t\t\t\t\t\thandleRadioButtons(event)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\tinline\r\n\t\t\t\t\t\tlabel=\"% od kwoty\"\r\n\t\t\t\t\t\ttype=\"radio\"\r\n\t\t\t\t\t\tname={\r\n\t\t\t\t\t\t\t\"CheckBox\" + parentIndex + positionIndex + additionalCostIndex\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvalue=\"percentage\"\r\n\t\t\t\t\t\tchecked={additionCostData.calculationType === \"percentage\"}\r\n\t\t\t\t\t\tonChange={(event: React.ChangeEvent<HTMLInputElement>) =>\r\n\t\t\t\t\t\t\thandleRadioButtons(event)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t</td>\r\n\r\n\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t<div className=\"marginLeft80\">\r\n\t\t\t\t\t<InputGroup id=\"additionalCost\">\r\n\t\t\t\t\t\t<InputGroup.Prepend>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tonClick={() => decrementAmount()}\r\n\t\t\t\t\t\t\t\tvariant=\"outline-secondary\">\r\n\t\t\t\t\t\t\t\t-\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tplaceholder={\r\n\t\t\t\t\t\t\t\tadditionCostData.calculationType === \"amount\" ? \"PLN\" : \"%\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvalue={\r\n\t\t\t\t\t\t\t\tadditionCostData.amount === 0 ? \"\" : additionCostData.amount\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonChange={(evt) => validateAndUpdateAmount(evt)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<InputGroup.Append>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tonClick={() => incrementAmount()}\r\n\t\t\t\t\t\t\t\tvariant=\"outline-secondary\">\r\n\t\t\t\t\t\t\t\t+\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</InputGroup.Append>\r\n\t\t\t\t\t</InputGroup>\r\n\t\t\t\t</div>\r\n\t\t\t</td>\r\n\r\n\t\t\t<td className=\"align-middle\">\r\n\t\t\r\n\t\t\t\t<div className=\"additionalCostIconWrapper\">\r\n\t\t\t\t\t{additionalCostsCount - 1 === additionalCostIndex && (\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-plus-square fa-2x\"\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\tdepartmentsActions.addAdditionalCosts(\r\n\t\t\t\t\t\t\t\t\t\tparentIndex,\r\n\t\t\t\t\t\t\t\t\t\tpositionIndex\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}}></i>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t{additionalCostsCount - 1 !== additionalCostIndex && (\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-minus-square fa-2x\"\r\n\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\tdepartmentsActions.deleteAdditionalCost(\r\n\t\t\t\t\t\t\t\t\t\tparentIndex,\r\n\t\t\t\t\t\t\t\t\t\tpositionIndex,\r\n\t\t\t\t\t\t\t\t\t\tadditionalCostIndex\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t}></i>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t\t<Form.Label className=\"additionalCostLabel\">{\"+ \"+getAdditionalCost()+ \" PLN\"}</Form.Label>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</td>\r\n\t\t</tr>\r\n\t);\r\n}\r\n\r\nexport default AdditionalCost;\r\n","import React, { useState } from \"react\";\r\nimport { Button, FormControl, InputGroup, Form } from \"react-bootstrap\";\r\nimport { SinglePositionState } from \"../reducers/departmentsReducer\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport departmentsActions from \"../actions/departmentsActions\";\r\nimport AdditionalCost from \"./additionalCost\";\r\ninterface Props {\r\n\tkey: number;\r\n\tpositionData: SinglePositionState;\r\n\tparentIndex: number;\r\n\tpositionIndex: number;\r\n\tcalcualteAdditionalCosts: any\r\n}\r\n\r\nfunction SinglePosition({ positionData, positionIndex, parentIndex ,calcualteAdditionalCosts}: Props) {\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst getSumWithoutAdditional = () => positionData.count * positionData.price;\r\n\r\n\tconst incrementCount = () =>\r\n\t\tdispatch(\r\n\t\t\tdepartmentsActions.editPositionCountInDepartment(\r\n\t\t\t\tparentIndex,\r\n\t\t\t\tpositionIndex,\r\n\t\t\t\tpositionData.count + 1\r\n\t\t\t)\r\n\t\t);\r\n\t\r\n\tconst decrementCount = () => {\r\n\t\tif (positionData.count > 0)\r\n\t\t\tdispatch(\r\n\t\t\t\tdepartmentsActions.editPositionCountInDepartment(\r\n\t\t\t\t\tparentIndex,\r\n\t\t\t\t\tpositionIndex,\r\n\t\t\t\t\tpositionData.count - 1\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t};\r\n\r\n\tconst incrementPrice = () =>\r\n\t\tdispatch(\r\n\t\t\tdepartmentsActions.editPositionPriceInDepartment(\r\n\t\t\t\tparentIndex,\r\n\t\t\t\tpositionIndex,\r\n\t\t\t\tparseFloat(positionData.price.toString()) + 1\r\n\t\t\t)\r\n\t\t);\r\n\t\r\n\tconst decrementPrice = () => {\r\n\t\tif (positionData.price > 0)\r\n\t\t\tdispatch(\r\n\t\t\t\tdepartmentsActions.editPositionPriceInDepartment(\r\n\t\t\t\t\tparentIndex,\r\n\t\t\t\t\tpositionIndex,\r\n\t\t\t\t\tpositionData.price - 1\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t};\r\n\r\n\tconst validateAndUpdateCount = (evt: any) => {\r\n\t\tconst regexCount = /^\\d*$/;\r\n\t\tlet text = evt.target.value;\r\n\t\tif (text === \"\") {\r\n\t\t\ttext = 0;\r\n\t\t}\r\n\t\tif (regexCount.test(text)) {\r\n\t\t\tdispatch(\r\n\t\t\t\tdepartmentsActions.editPositionCountInDepartment(\r\n\t\t\t\t\tparentIndex,\r\n\t\t\t\t\tpositionIndex,\r\n\t\t\t\t\tparseInt(text)\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tconst validateAndUpdatePrice = (evt: any) => {\r\n\t\tconst regexPrice = /^\\d*\\.?\\d{0,2}?$/;\r\n\t\tlet text = evt.target.value;\r\n\t\tif (text === \"\") {\r\n\t\t\ttext = 0;\r\n\t\t} else if (text[0] === \"0\") {\r\n\t\t\t//usuwa 0 z przodu\r\n\t\t\ttext = text.slice(1);\r\n\t\t}\r\n\t\tif (regexPrice.test(text)) {\r\n\t\t\tdispatch(\r\n\t\t\t\tdepartmentsActions.editPositionPriceInDepartment(\r\n\t\t\t\t\tparentIndex,\r\n\t\t\t\t\tpositionIndex,\r\n\t\t\t\t\ttext\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handleCheckBoxChange = (evt:any) => {\r\n\t\tif (evt.target.checked) {\r\n\t\t\tdispatch(departmentsActions.initializeAdditionalCosts(parentIndex, positionIndex));\r\n\t\t} else dispatch(departmentsActions.resetAdditionalCosts(parentIndex, positionIndex));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<tr>\r\n\t\t\t\t<td className=\"cellWithLabel align-middle\">\r\n\t\t\t\t\t<Form.Label id=\"nameLabel\">{positionData.name}</Form.Label>\r\n\t\t\t\t</td>\r\n\r\n\t\t\t\t<td className=\"cellWithInputs align-middle\">\r\n\t\t\t\t\t<InputGroup>\r\n\t\t\t\t\t\t<InputGroup.Prepend id=\"count\">\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tonClick={() => decrementCount()}\r\n\t\t\t\t\t\t\t\tvariant=\"outline-secondary\">\r\n\t\t\t\t\t\t\t\t-\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tonChange={(evt) => validateAndUpdateCount(evt)}\r\n\t\t\t\t\t\t\tvalue={positionData.count}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<InputGroup.Append>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tonClick={() => incrementCount()}\r\n\t\t\t\t\t\t\t\tvariant=\"outline-secondary\">\r\n\t\t\t\t\t\t\t\t+\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</InputGroup.Append>\r\n\t\t\t\t\t</InputGroup>\r\n\t\t\t\t</td>\r\n\r\n\t\t\t\t<td className=\"cellWithUnit align-middle\">\r\n\t\t\t\t\t<Form.Label>{positionData.unit}</Form.Label>\r\n\t\t\t\t</td>\r\n\r\n\t\t\t\t<td className=\"cellWithInputs align-middle\">\r\n\t\t\t\t\t<InputGroup id=\"price\">\r\n\t\t\t\t\t\t<InputGroup.Prepend>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tonClick={() => decrementPrice()}\r\n\t\t\t\t\t\t\t\tvariant=\"outline-secondary\">\r\n\t\t\t\t\t\t\t\t-\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</InputGroup.Prepend>\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tonChange={(evt) => validateAndUpdatePrice(evt)}\r\n\t\t\t\t\t\t\tvalue={positionData.price}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<InputGroup.Append>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tonClick={() => incrementPrice()}\r\n\t\t\t\t\t\t\t\tvariant=\"outline-secondary\">\r\n\t\t\t\t\t\t\t\t+\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</InputGroup.Append>\r\n\t\t\t\t\t</InputGroup>\r\n\t\t\t\t</td>\r\n\r\n\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t<Form.Label>PLN</Form.Label>\r\n\t\t\t\t</td>\r\n\r\n\t\t\t\t<td className=\"align-middle cellWithCheckbox\">\r\n\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\tclassName=\"marginLeft80\"\r\n\t\t\t\t\t\tlabel={\"dodatkowe koszta\"}\r\n\t\t\t\t\t\ttype={\"switch\"}\r\n\t\t\t\t\t\tonChange={(evt: any) => handleCheckBoxChange(evt)}\r\n\t\t\t\t\t\tchecked={positionData.addionalCosts!==undefined}\r\n\t\t\t\t\t\tid={positionData.id}></Form.Check>\r\n\t\t\t\t</td>\r\n\r\n\t\t\t\t<td className=\"cellWithLabel align-middle\">\r\n\t\t\t\t\t<Form.Label id=\"sumLabel\">{positionData.addionalCosts===undefined? getSumWithoutAdditional() + \" PLN\":getSumWithoutAdditional() +\" PLN \" + \"(+\"+calcualteAdditionalCosts(parentIndex,positionIndex)+\" PLN)\"}</Form.Label>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\r\n\t\t\t{positionData.addionalCosts!==undefined && positionData.addionalCosts.map((additionCostData, additionalCostIndex) =>\r\n\t\t\t\t<AdditionalCost key={additionalCostIndex} positionIndex={positionIndex} parentIndex={parentIndex} additionalCostIndex={additionalCostIndex} additionalCostsCount={ positionData.addionalCosts.length} additionCostData={additionCostData} getSumWithoutAdditional={getSumWithoutAdditional}></AdditionalCost>)\r\n\t\t\t\r\n\t\t}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default SinglePosition;\r\n","import React from \"react\";\r\nimport { Button } from \"react-bootstrap\";\r\n\r\ninterface Props {\r\n\tgetWholeSum(): number\r\n\tgeneretePdf(): void\r\n}\r\n\r\nfunction BottomBar(props:Props) {\r\n\treturn (\r\n\t\t<div id=\"bottomBarWrapper\">\r\n\t\t\t<div className=\"verticalyCenter\">\r\n        <Button  id=\"generatePdfButton\" variant=\"danger\" onClick={()=> props.generetePdf()}>Generuj pdf</Button>\r\n\t\t\t\t<span id=\"wholeSumLabel\">Suma: {props.getWholeSum()} PLN</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default BottomBar;\r\n","import React from \"react\";\r\nimport { Tabs, Tab, Table } from \"react-bootstrap\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"../reducers/rootReducer\";\r\nimport SinglePosition from \"./SinglePosition\";\r\nimport BottomBar from \"./BottomBar\";\r\nimport * as pdfFonts from \"pdfmake/build/vfs_fonts\";\r\nimport * as pdfMake from \"pdfmake/build/pdfmake\";\r\n\r\n\r\nfunction PositionsTabs() {\r\n\tconst state = useSelector((state: RootState) => state.departments);\r\n\r\n\tconst generetePdf = () => {\r\n\t\tconst fs = require(\"fs\");\r\n\t\tconst { dialog } = require(\"electron\").remote;\r\n\t\t(window as any).pdfMake.vfs = pdfFonts.pdfMake.vfs;\r\n\r\n\t\tlet docContnet:any[] = [];\r\n\t\tfor (let i = 0; i < state.length; i++) {\r\n\t\t\tlet headerAdded = false;\r\n\t\t\tlet tableRows = [];\r\n\t\t\tfor (let j = 0; j < state[i].positions.length; j++) {\r\n\t\t\t\tif (state[i].positions[j].count !== 0) {\r\n\t\t\t\t\tif (!headerAdded) {\r\n\t\t\t\t\t\tdocContnet.push({ text: state[i].name, style: \"departmentHeader\" });\r\n\t\t\t\t\t\ttableRows.push([\r\n\t\t\t\t\t\t\t{ text: \"Nazwa usługi\", style: \"tableHeader\" },\r\n\t\t\t\t\t\t\t{ text: \"Ilość\", style: \"tableHeader\" },\r\n\t\t\t\t\t\t\t{ text: \"jm\", style: \"tableHeader\" },\r\n\t\t\t\t\t\t\t{ text: \"Cena\", style: \"tableHeader\" },\r\n\t\t\t\t\t\t\t{ text: \"Dodatkowe koszta\", style: \"tableHeader\" },\r\n\t\t\t\t\t\t\t{ text: \"Suma\", style: \"tableHeader\" },\r\n\t\t\t\t\t\t]); //tableHeader\r\n\t\t\t\t\t\theaderAdded = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttableRows.push([\r\n\t\t\t\t\t\tstate[i].positions[j].name,\r\n\t\t\t\t\t\tstate[i].positions[j].count,\r\n\t\t\t\t\t\tstate[i].positions[j].unit,\r\n\t\t\t\t\t\tstate[i].positions[j].price,\r\n\t\t\t\t\t\tstate[i].positions[j].addionalCosts !== undefined\r\n\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\tlayout: \"noBorders\",\r\n\t\t\t\t\t\t\t\ttable: {\r\n\t\t\t\t\t\t\t\t\tbody: state[i].positions[j].addionalCosts.filter((aditionalCost) => aditionalCost.name !== \"\" && aditionalCost.amount !== 0).map((aditionalCost) => [aditionalCost.name + \":\", aditionalCost.calculationType === \"amount\" ? aditionalCost.amount + \" PLN\" : aditionalCost.amount * state[i].positions[j].price * state[i].positions[j].count / 100 + \" PLN\"]),\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t: \"0\",\r\n\t\t\t\t\t\tstate[i].positions[j].addionalCosts !== undefined ? ((state[i].positions[j].addionalCosts.filter((aditionalCost) => aditionalCost.name !== \"\" && aditionalCost.amount !== 0).map((addionalCost) => addionalCost.calculationType === \"amount\" ? addionalCost.amount : addionalCost.amount * state[i].positions[j].price * state[i].positions[j].count / 100).reduce((a, b) => a + b, 0)) + (state[i].positions[j].price * state[i].positions[j].count)).toFixed(2) : (state[i].positions[j].price * state[i].positions[j].count).toFixed(2)\r\n\t\t\t\t\t]);\r\n\t\t\t\t}\r\n\t\t\t\tif (j === state[i].positions.length - 1 && headerAdded) {\r\n\t\t\t\t\t//sprawdzenie aby dodana byla tylko 1 tabela na 1 dzial\r\n\t\t\t\t\tdocContnet.push({\r\n\t\t\t\t\t\ttable: {\r\n\t\t\t\t\t\t\theaderRows: 1,\r\n\t\t\t\t\t\t\twidths: [\"*\", \"auto\", \"auto\", \"auto\", \"auto\", \"auto\"],\r\n\t\t\t\t\t\t\tbody: tableRows,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdocContnet.push({text: \"Suma: \"+getDepartmentSum(i).toFixed(2)+\" PLN\", alignment: 'right',style:'departmentSumLabel'})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tdocContnet.push({text: \"Łącznie: \"+getWholeSum().toFixed(2)+\" PLN\", alignment: 'right',style:'wholeSumLabel'})\r\n\t\tconst docDefinition = {\r\n\t\t\tcontent: docContnet,\r\n\t\t\tstyles: {\r\n\t\t\t\ttableHeader: {\r\n\t\t\t\t\tbold: true,\r\n\t\t\t\t\tfontSize: 13,\r\n\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t},\r\n\t\t\t\tdepartmentHeader: {\r\n\t\t\t\t\tbold: true,\r\n\t\t\t\t\tfontSize: 18,\r\n\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t},\r\n\t\t\t\twholeSumLabel: {\r\n\t\t\t\t\tbold: true,\r\n\t\t\t\t\tfontSize: 15,\r\n\t\t\t\t\tcolor: \"black\",\r\n\t\t\t\t\tmarginTop: 40,\r\n\t\t\t\t},\r\n\t\t\t\tdepartmentSumLabel: {\r\n\t\t\t\t\tfontSize: 12,\r\n\t\t\t\t\tmarginTop: 5,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t};\r\n\r\n\t\tconst pdf = pdfMake.createPdf(docDefinition);\r\n\t\tpdf.getBlob(async (blob) => {\r\n\t\t\tconst buffer = Buffer.from(await blob.arrayBuffer());\r\n\t\t\tdialog\r\n\t\t\t\t.showSaveDialog(() => {})\r\n\t\t\t\t.then((file: any) =>\r\n\t\t\t\t\tfile.filePath.endsWith(\".pdf\")\r\n\t\t\t\t\t\t? fs.writeFileSync(file.filePath, buffer)\r\n\t\t\t\t\t\t: file.filePath===\"\"?\"\":fs.writeFileSync(file.filePath + \".pdf\", buffer)\t//sprawdzanie czy nie bylo wcisniete cancel.\"\" nie robi nic, nie moglem dac return \r\n\t\t\t\t);\r\n\t\t});\r\n\t};\r\n\r\n\tconst getDepartmentSum = (departmentIndex:number) => {\r\n\t\tlet sum = 0;\r\n\t\tfor (let i = 0; i < state[departmentIndex].positions.length; i++){\r\n\t\t\tif (state[departmentIndex].positions[i].price !== 0 && state[departmentIndex].positions[i].count !== 0) {\r\n\t\t\t\tsum += state[departmentIndex].positions[i].price * state[departmentIndex].positions[i].count;\r\n\t\t\t\tif (state[departmentIndex].positions[i].addionalCosts !== undefined) {\r\n\t\t\t\t\tsum+=calcualteAdditionalCosts(departmentIndex, i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn sum;\r\n\t}\r\n\r\n\tconst calcualteAdditionalCosts = (departmentIndex: number, positionIndex: number) => {\r\n\t\tlet sum = 0;\r\n\t\tlet additionalCosts = state[departmentIndex].positions[positionIndex].addionalCosts;\r\n\t\tfor (let i = 0;\ti < additionalCosts.length;i++) {\r\n\t\t\tif (additionalCosts[i].amount !== 0 && additionalCosts[i].name !== \"\") {\r\n\t\t\t\tif (additionalCosts[i].calculationType ===\t\"amount\"\r\n\t\t\t\t) {\r\n\t\t\t\t\tsum += additionalCosts[i].amount;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsum +=\r\n\t\t\t\t\t\t(state[departmentIndex].positions[positionIndex].price *\r\n\t\t\t\t\t\t\tstate[departmentIndex].positions[positionIndex].count *\r\n\t\t\t\t\t\t\tadditionalCosts[i].amount) /\r\n\t\t\t\t\t\t100;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn sum;\r\n\t}\r\n\r\n\tconst getWholeSum = () => {\r\n\t\tlet sum = 0;\r\n\t\tfor (let i = 0; i < state.length; i++) {\r\n\t\t\tfor (let j = 0; j < state[i].positions.length; j++) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tstate[i].positions[j].price !== 0 &&\r\n\t\t\t\t\tstate[i].positions[j].count !== 0\r\n\t\t\t\t) {\r\n\t\t\t\t\tsum += state[i].positions[j].price * state[i].positions[j].count;\r\n\t\t\t\t\tif (state[i].positions[j].addionalCosts !== undefined) {\r\n\t\t\t\t\t\tsum += calcualteAdditionalCosts(i, j);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn +sum.toFixed(2); // + z przodu aby to nie byl string tylko numer\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div id=\"calculatorScreenWrapper\">\r\n\t\t\t<Tabs className=\"tab\">\r\n\t\t\t\t{state.map((item, index) => (\r\n\t\t\t\t\t<Tab key={index} title={item.name} eventKey={item.name}>\r\n\t\t\t\t\t\t<h1 id=\"headerDepartmentName\"> {item.name} </h1>\r\n\t\t\t\t\t\t<Table borderless>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t{item.positions.map((position, positionIndex) => (\r\n\t\t\t\t\t\t\t\t\t<SinglePosition\r\n\t\t\t\t\t\t\t\t\t\tkey={positionIndex}\r\n\t\t\t\t\t\t\t\t\t\tpositionData={position}\r\n\t\t\t\t\t\t\t\t\t\tparentIndex={index}\r\n\t\t\t\t\t\t\t\t\t\tpositionIndex={positionIndex}\r\n\t\t\t\t\t\t\t\t\t  calcualteAdditionalCosts={calcualteAdditionalCosts}\r\n\t\t\t\t\t\t\t\t\t></SinglePosition>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</Tab>\r\n\t\t\t\t))}\r\n\t\t\t</Tabs>\r\n\t\t\t<BottomBar\r\n\t\t\t\tgetWholeSum={getWholeSum}\r\n\t\t\t\tgeneretePdf={generetePdf}></BottomBar>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default PositionsTabs;\r\n","import React, { useState } from \"react\";\r\nimport { FormControl, Form } from \"react-bootstrap\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport departmentsActions from \"../actions/departmentsActions\";\r\ninterface Props {\r\n\tdepartment: string;\r\n\tname: string;\r\n\tunit: string;\r\n\tprice: number;\r\n\tdepartmentIndex: number;\r\n\tpositionIndex: number;\r\n\tid: string;\r\n\tdeleteDepartmentIfEmpty: any;\r\n\tfindDepartmentIndex: any;\r\n\tdepartmentLength: number;\r\n}\r\nfunction SingleEditPosition({\r\n\tdepartment,\r\n\tname,\r\n\tunit,\r\n\tprice,\r\n\tdepartmentIndex,\r\n\tpositionIndex,\r\n\tid,\r\n\tdeleteDepartmentIfEmpty,\r\n\tfindDepartmentIndex,\r\n\tdepartmentLength,\r\n}: any) {\r\n\tconst [editionActive, setEditionActivation] = useState(false);\r\n\tconst [editedPosition, setEditedPosition] = useState({\r\n\t\tdepartment: department,\r\n\t\tname: name,\r\n\t\tunit: unit,\r\n\t\tprice: price,\r\n\t});\r\n\tconst dispatch = useDispatch();\r\n\tconst deletePosition = () => {\r\n\t\tdispatch(\r\n\t\t\tdepartmentsActions.deletePositionInDepartmentWithDB(\r\n\t\t\t\tdepartmentIndex,\r\n\t\t\t\tpositionIndex,\r\n\t\t\t\tid\r\n\t\t\t)\r\n\t\t);\r\n\t\tdeleteDepartmentIfEmpty(departmentIndex);\r\n\t};\r\n\r\n\tconst handleDepartmentNameEdition = (event: any) => {\r\n\t\tlet text = event.target.value;\r\n\t\tsetEditedPosition((prevState) =>\r\n\t\t\tObject.assign({}, prevState, { department: text })\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleNameEdition = (event: any) => {\r\n\t\tlet text = event.target.value;\r\n\t\tsetEditedPosition((prevState) =>\r\n\t\t\tObject.assign({}, prevState, { name: text })\r\n\t\t);\r\n\t};\r\n\r\n\tconst handleUnitEdition = (event: any) => {\r\n\t\tlet text = event.target.value;\r\n\t\tsetEditedPosition((prevState) =>\r\n\t\t\tObject.assign({}, prevState, { unit: text })\r\n\t\t);\r\n\t};\r\n\r\n\tconst handlePriceEdition = (event: any) => {\r\n\t\tlet text = event.target.value;\r\n\t\tsetEditedPosition((prevState) =>\r\n\t\t\tObject.assign({}, prevState, {\r\n\t\t\t\tprice: parseFloat(parseFloat(text).toFixed(2)),\r\n\t\t\t})\r\n\t\t); //nie do konca eleganckie rozwiazanie, ale dziala\r\n\t};\r\n\r\n\tconst handleWholeEdition = () => {\r\n\t\tsetEditionActivation(false);\r\n\t\t\r\n\t\tif (name !== editedPosition.name) {\r\n\t\t\tdispatch(\r\n\t\t\t\tdepartmentsActions.editPositionNameInDepartment(\r\n\t\t\t\t\tdepartmentIndex,\r\n\t\t\t\t\tpositionIndex,\r\n\t\t\t\t\teditedPosition.name,\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (unit !== editedPosition.unit) {\r\n\t\t\tdispatch(\r\n\t\t\t\tdepartmentsActions.editPositionUnitInDepartment(\r\n\t\t\t\t\tdepartmentIndex,\r\n\t\t\t\t\tpositionIndex,\r\n\t\t\t\t\teditedPosition.unit,\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (price !== editedPosition.price) {\r\n\t\t\tdispatch(\r\n\t\t\t\tdepartmentsActions.editPositionPriceInDepartment(\r\n\t\t\t\t\tdepartmentIndex,\r\n\t\t\t\t\tpositionIndex,\r\n\t\t\t\t\teditedPosition.price,\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (department !== editedPosition.department) {\r\n\t\t\tlet newDepartmentIndex = findDepartmentIndex(editedPosition.department);\r\n\t\t\tif (newDepartmentIndex === -1) {\r\n\t\t\t\tdispatch(departmentsActions.addDepartment(editedPosition.department));\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tdepartmentsActions.movePositionToAnotherDepartment(\r\n\t\t\t\t\t\tdepartmentIndex,\r\n\t\t\t\t\t\tdepartmentLength,\r\n\t\t\t\t\t\tpositionIndex\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tdispatch(\r\n\t\t\t\t\tdepartmentsActions.movePositionToAnotherDepartment(\r\n\t\t\t\t\t\tdepartmentIndex,\r\n\t\t\t\t\t\tnewDepartmentIndex,\r\n\t\t\t\t\t\tpositionIndex\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//dispatch(departmentsActions.editPositionDepartmentWithDb(editedPosition.department, id));\r\n\t\t\tdeleteDepartmentIfEmpty(departmentIndex);\r\n\t\t}\r\n\t\tdispatch(departmentsActions.editWholePositionInDb(id, editedPosition.department, editedPosition.name, editedPosition.unit, editedPosition.price));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<tr>\r\n\t\t\t{!editionActive && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<Form.Label id=\"nameLabel\">{department}</Form.Label>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<Form.Label id=\"nameLabel\">{name}</Form.Label>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<Form.Label id=\"nameLabel\">{unit}</Form.Label>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<Form.Label id=\"nameLabel\">{price}</Form.Label>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"align-middle editionIconsRow\">\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-edit editIcon\"\r\n\t\t\t\t\t\t\tonClick={() => setEditionActivation(true)}></i>\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-trash deleteIcon\"\r\n\t\t\t\t\t\t\tonClick={() => deletePosition()}></i>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\r\n\t\t\t{editionActive && (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tas=\"textarea\"\r\n\t\t\t\t\t\t\tdefaultValue={department}\r\n\t\t\t\t\t\t\tonChange={(e) => handleDepartmentNameEdition(e)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tas=\"textarea\"\r\n\t\t\t\t\t\t\tdefaultValue={name}\r\n\t\t\t\t\t\t\tonChange={(e) => handleNameEdition(e)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tas=\"textarea\"\r\n\t\t\t\t\t\t\tdefaultValue={unit}\r\n\t\t\t\t\t\t\tonChange={(e) => handleUnitEdition(e)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tas=\"textarea\"\r\n\t\t\t\t\t\t\tdefaultValue={price}\r\n\t\t\t\t\t\t\tonChange={(e) => handlePriceEdition(e)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-check-square  fa-2x acceptEditIcon\"\r\n\t\t\t\t\t\t\tonClick={() => handleWholeEdition()}></i>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</tr>\r\n\t);\r\n}\r\n\r\nexport default SingleEditPosition;\r\n","import React, { useState } from \"react\";\r\nimport SingleEditPosition from \"./SingleEditPosition\";\r\nimport { FormControl, Form } from \"react-bootstrap\";\r\nimport { Table } from \"react-bootstrap\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { RootState } from \"../reducers/rootReducer\";\r\nimport departmentsActions from \"../actions/departmentsActions\";\r\n\r\n\r\nfunction EditionScreen() {\r\n\tconst positions = useSelector((state: RootState) => state.departments);\r\n\tconst dispatch = useDispatch();\r\n\tconst [inputs, setInputs] = useState({\r\n\t\tdepartment: \"\",\r\n\t\tname: \"\",\r\n\t\tunit: \"\",\r\n\t\tprice: 0,\r\n\t});\r\n\r\n\tconst handleDepartmentInput = (event: any) => {\r\n\t\tlet text = event.target.value;\r\n\t\tsetInputs((prevState) => {\r\n\t\t\treturn Object.assign({}, prevState, { department: text });\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleNameInput = (event: any) => {\r\n\t\tlet text = event.target.value;\r\n\t\tsetInputs((prevState) => {\r\n\t\t\treturn Object.assign({}, prevState, { name: text });\r\n\t\t});\r\n\t};\r\n\r\n\tconst handleUnitInput = (event: any) => {\r\n\t\tlet text = event.target.value;\r\n\t\tsetInputs((prevState) => {\r\n\t\t\treturn Object.assign({}, prevState, { unit: text });\r\n\t\t});\r\n\t};\r\n\r\n\tconst validatePrice = (event: any) => {\t\r\n\t\tconst regexPrice = /^\\d*\\.?\\d{0,2}?$/;\t// walidacja nie dziala tak jakbym chcial, moze byc np pare '.'. Sprawdza po pojedynczym znaku i nie wiem jak to lepeij zvalidowac \r\n\t\tif (!regexPrice.test(event.key)) {\r\n\t\t\tevent.preventDefault();\r\n\t\t}\r\n\t};\r\n\t\r\n\tconst deleteEmptyDepartment = (departmentIndex: number) => {\r\n\t\tif (positions[departmentIndex].positions.length === 1) { // nie mam pojecia czemu 1 a nie 0, pewnie zanim usunie sie z db to caly czas jest 1 element\r\n\t\t\tdispatch(departmentsActions.deleteDepartment(departmentIndex));\r\n\t\t}\r\n\t}\r\n\r\n\tconst handlePriceInput = (event: any) => {\r\n\t\tlet text = event.target.value;\r\n\t\t\tsetInputs((prevState) => {\r\n\t\t\t\treturn Object.assign({}, prevState, { price: parseFloat(text) });\r\n\t\t\t});\r\n\t\t};\r\n\r\n\tconst addPosition = () => {\r\n\t\tif (inputs.department !== \"\" && inputs.name !== \"\" && inputs.unit !== \"\" && inputs.price !== 0) {\r\n\t\t\tlet departmentIndex = positions.findIndex((position) => position.name === inputs.department);\r\n\t\t\tif (departmentIndex === -1) {\r\n\t\t\t\tdispatch(departmentsActions.addDepartmentWithDB(inputs.department));\r\n\t\t\t\tdepartmentIndex = positions.length;\r\n\t\t\t}\r\n\t\t\tdispatch(departmentsActions.addPositionToDepartmentWithDB(departmentIndex, inputs.name, inputs.unit, inputs.price, inputs.department));\r\n\t\t\tconsole.log(\"dodano\");\r\n\t\t}\r\n\t};\r\n\r\n\tconst findDepartmentIndex = (departmentName:string) => {\r\n\t\treturn positions.findIndex((position) => position.name === departmentName);\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<Table borderless style={{ marginTop: \"50px\" }}>\r\n\t\t\t<tbody>\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td colSpan={5}>\r\n\t\t\t\t\t\t<Form.Label className=\"align-middle textInTable\">\r\n\t\t\t\t\t\t\tDodawanie pozycji\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<FormControl\r\n\t\t\t\t\t\t\tplaceholder=\"Dział\"\r\n\t\t\t\t\t\t\tname=\"DepartmentInput\"\r\n\t\t\t\t\t\t\tonChange={(e) => handleDepartmentInput(e)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<FormControl placeholder=\"Nazwa pozycji\" name=\"PositionNameInput\" \tonChange={(e) => handleNameInput(e)} />\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<FormControl placeholder=\"Jednostka\" name=\"PositionUnitInput\" \tonChange={(e) => handleUnitInput(e)}/>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td className=\"align-middle\">\r\n\t\t\t\t\t\t<FormControl placeholder=\"Cena\" name=\"PosiitonPriceInput\" onKeyPress={(e:any)=>validatePrice(e)}\tonChange={(e) => handlePriceInput(e)}/>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\tclassName=\"fa fa-plus-square fa-3x addIcon\"\r\n\t\t\t\t\t\t\tonClick={() => addPosition()}></i>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td colSpan={5}>\r\n\t\t\t\t\t\t<Form.Label className=\"align-middle textInTable\">\r\n\t\t\t\t\t\t\tEdycja pozycji\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\r\n\t\t\t\t\r\n\t\t\t\t{positions.map((department, index) =>\r\n\t\t\t\t\tdepartment.positions.map((item, idx) => (\r\n\t\t\t\t\t\t<SingleEditPosition\r\n\t\t\t\t\t\tdepartment={department.name}\r\n\t\t\t\t\t\tname={item.name}\r\n\t\t\t\t\t\tunit={item.unit}\r\n\t\t\t\t\t\tprice={item.price}\r\n\t\t\t\t\t\tdepartmentIndex={index}\r\n\t\t\t\t\t\tpositionIndex={idx}\r\n\t\t\t\t\t\tid={item.id}\r\n\t\t\t\t\t\t\tdeleteDepartmentIfEmpty={deleteEmptyDepartment}\r\n\t\t\t\t\t\t\tfindDepartmentIndex={findDepartmentIndex}\r\n\t\t\t\t\t\t\tdepartmentLength={positions.length}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</SingleEditPosition>\r\n\t\t\t\t\t))\r\n\t\t\t\t)}\r\n\t\t\t</tbody>\r\n\t\t</Table>\r\n\t);\r\n}\r\n\r\nexport default EditionScreen;\r\n","import React from \"react\";\r\nimport NavigationBar from \"./components/NavigationBar\";\r\nimport CalculatorScreen from \"./components/CalculatorScreen\";\r\nimport EditionScreen from \"./components/EditionScreen\";\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from './reducers/rootReducer';\r\n//style\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport \"font-awesome/css/font-awesome.min.css\";\r\nimport \"./components/css/style.css\";\r\nfunction App() {\r\n\tconst state = useSelector((state: RootState) => state.activeScreen);\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<NavigationBar/>\r\n\t\t\t{state.showCalculator && <CalculatorScreen />}\r\n\t\t\t{state.showEdition && <EditionScreen/>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import types from \"../types/departmentsTypes\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport AdditionalCost from \"../components/additionalCost\";\r\nconst { remote } = require(\"electron\");\r\nconst dbInstance = remote.getGlobal(\"db\");\r\nexport interface SinglePositionState {\r\n\tname: string;\r\n\tunit: string;\r\n\tprice: number;\r\n\tcount: number;\r\n\tid: string;\r\n\taddionalCosts?: AdditionalCost[];\r\n}\r\n\r\ninterface Departments {\r\n\tid: string;\r\n\tname: string;\r\n\tpositions: SinglePositionState[];\r\n}\r\n\r\ninterface AdditionalCost {\r\n\tname: string;\r\n\tcalculationType: \"amount\" | \"percentage\"\r\n\tamount: number;\r\n}\r\nconst INITIAL_STATE: Departments[] = [];\r\n\r\nconst departmentReducer = (\r\n\tstate = INITIAL_STATE,\r\n\taction: any\r\n): Departments[] => {\r\n\tswitch (action.type) {\r\n\t\tcase types.ADD_DEPARTMENT:\r\n\t\t\treturn [\r\n\t\t\t\t...state,\r\n\t\t\t\t{\r\n\t\t\t\t\tid: uuidv4(),\r\n\t\t\t\t\tname: action.name,\r\n\t\t\t\t\tpositions: [],\r\n\t\t\t\t},\r\n\t\t\t];\r\n\r\n\t\tcase types.ADD_DEPARTMENT_WITH_DB:\r\n\t\t\tlet deparments: string[] = [];\r\n\t\t\tdbInstance.getDepartments().then((item: string) => deparments.push(item));\r\n\t\t\tif (deparments.includes(action.name)) {\r\n\t\t\t\treturn [\r\n\t\t\t\t\t...state,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: uuidv4(),\r\n\t\t\t\t\t\tname: action.name,\r\n\t\t\t\t\t\tpositions: [],\r\n\t\t\t\t\t},\r\n\t\t\t\t];\r\n\t\t\t}\r\n\r\n\t\tcase types.ADD_POSITION_TO_DEPARTMENT:\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: [\r\n\t\t\t\t\t\t\t...item.positions,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: action.name,\r\n\t\t\t\t\t\t\t\tunit: action.unit,\r\n\t\t\t\t\t\t\t\tprice: action.price,\r\n\t\t\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\t\t\tid: action.id,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.ADD_POSITION_TO_DEPARTMENT_WITH_DB:\r\n\t\t\tdbInstance.addPosition(\r\n\t\t\t\taction.departmentName,\r\n\t\t\t\taction.name,\r\n\t\t\t\taction.unit,\r\n\t\t\t\taction.price\r\n\t\t\t);\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: [\r\n\t\t\t\t\t\t\t...item.positions,\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tname: action.name,\r\n\t\t\t\t\t\t\t\tunit: action.unit,\r\n\t\t\t\t\t\t\t\tprice: action.price,\r\n\t\t\t\t\t\t\t\tcount: 0,\r\n\t\t\t\t\t\t\t\tid: uuidv4(),\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.DELETE_DEPARTMENT:\r\n\t\t\treturn state.filter((item) => item !== state[action.departmentIndex]);\r\n\r\n\t\tcase types.DELETE_POSITION_IN_DEPARTMENT:\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.filter(\r\n\t\t\t\t\t\t\t(position) => position !== item.positions[action.positionIndex]\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.DELETE_POSITION_IN_DEPARTMENT_WITH_DB:\r\n\t\t\tdbInstance.deletePosition(action.id);\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.filter(\r\n\t\t\t\t\t\t\t(position) => position !== item.positions[action.positionIndex]\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.EDIT_DEPARTMENT_NAME:\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, { name: action.name })\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.EDIT_POSITION_COUNT_IN_DEPARTMENT:\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t? Object.assign({}, position, { count: action.count })\r\n\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.EDIT_POSITION_NAME_IN_DEPARTMENT:\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t? Object.assign({}, position, { name: action.name })\r\n\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.EDIT_POSITION_NAME_IN_DEPARTMENT_WTIH_DB:\r\n\t\t\tdbInstance.changePositionName(action.id, action.name);\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t? Object.assign({}, position, { name: action.name })\r\n\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.EDIT_POSITION_PRICE_IN_DEPARTMENT:\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t? Object.assign({}, position, { price: action.price })\r\n\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.EDIT_POSITION_PRICE_IN_DEPARTMENT_WITH_DB:\r\n\t\t\tdbInstance.changePositionPrice(action.id, action.price);\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t? Object.assign({}, position, { price: action.price })\r\n\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.EDIT_POSITION_UNIT_IN_DEPARTMENT:\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t? Object.assign({}, position, { unit: action.unit })\r\n\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.EDIT_POSITION_UNIT_IN_DEPARTMENT_WITH_DB:\r\n\t\t\tdbInstance.changePositionUnit(action.id, action.unit);\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t? Object.assign({}, position, { unit: action.unit })\r\n\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.RESET_POSITIONS_IN_DEPARTMENT:\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, { positions: [] })\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.MOVE_POSITION_TO_ANOTHER_DEPARTMENT:\r\n\t\t\tlet postion =\r\n\t\t\t\tstate[action.oldDepartmentIndex].positions[action.positionIndex];\r\n\t\t\tlet newPositions = state.map((item) =>\r\n\t\t\t\titem === state[action.oldDepartmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.filter(\r\n\t\t\t\t\t\t\t(position) => position !== item.positions[action.positionIndex]\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\t\treturn newPositions.map((item) =>\r\n\t\t\t\titem === state[action.newDepartmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: [...item.positions, postion],\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.EDIT_WHOLE_POSITION_IN_DB:\r\n\t\t\tdbInstance.editWholePosition(\r\n\t\t\t\taction.id,\r\n\t\t\t\taction.department,\r\n\t\t\t\taction.name,\r\n\t\t\t\taction.unit,\r\n\t\t\t\taction.price\r\n\t\t\t);\r\n\t\t\treturn state;\r\n\r\n\t\tcase types.INITIALIZE_ADDITIONAL_COSTS:\r\n\t\t\tlet additionalCosts =\r\n\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t.addionalCosts;\r\n\t\t\tif (additionalCosts?.length === undefined) {\r\n\t\t\t\tadditionalCosts = [{ name: \"\",calculationType:\"amount\", amount: 0 }];\r\n\t\t\t}\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t? Object.assign({}, position, {\r\n\t\t\t\t\t\t\t\t\taddionalCosts: additionalCosts,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\t\tcase types.RESET_ADDITIONAL_COSTS:\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t? Object.assign({}, position, {\r\n\t\t\t\t\t\t\t\t\taddionalCosts: undefined,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\t\tcase types.ADD_ADDITIONAL_COSTS:\r\n\t\t\tlet newAdditionalCosts =\r\n\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t.addionalCosts;\r\n\t\t\tnewAdditionalCosts?.push({ name: \"\",calculationType:\"amount\", amount: 0 });\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t? Object.assign({}, position, {\r\n\t\t\t\t\t\t\t\t\taddionalCosts: newAdditionalCosts,\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n case types.EDIT_ADDITIONALCOST_AMOUNT:\r\n\t\tlet additionCostWithUpdatedPrice = state[action.departmentIndex].positions[action.positionIndex].addionalCosts.map((additionalCost) => additionalCost === state[action.departmentIndex].positions[action.positionIndex].addionalCosts[action.additionalCostIndex] ? Object.assign({}, additionalCost, { amount: action.amount }):additionalCost);\r\n\t\treturn state.map((item) =>\r\n\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t? Object.assign({}, position, { addionalCosts: additionCostWithUpdatedPrice })\r\n\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t),\r\n\t\t\t\t})\r\n\t\t\t\t: item\r\n\t\t);\r\n\t\t\r\n\r\n\t\tcase types.EDIT_ADDITIONALCOST_NAME:\r\n\t\t\tlet additionCostWithUpdatedName = state[action.departmentIndex].positions[action.positionIndex].addionalCosts.map((additionalCost) => additionalCost === state[action.departmentIndex].positions[action.positionIndex].addionalCosts[action.additionalCostIndex] ? Object.assign({}, additionalCost, { name: action.name }):additionalCost);\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t? Object.assign({}, position, { addionalCosts: additionCostWithUpdatedName })\r\n\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t})\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\tcase types.DELETE_ADDITIONAL_COST: \r\n\t\t\tlet additionCostWithDeletedItem = state[action.departmentIndex].positions[action.positionIndex].addionalCosts;\r\n\t\t\tadditionCostWithDeletedItem.splice(action.additionalCostIndex, 1)\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t\t? Object.assign({}, position, {\r\n\t\t\t\t\t\t\t\t\t\t\taddionalCosts: additionCostWithDeletedItem, \r\n\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\r\n\t\t\tcase types.EDIT_ADDITIONALCOST_TYPE: \r\n\t\t\tlet additionCostWithUpdatedType =  state[action.departmentIndex].positions[action.positionIndex].addionalCosts.map((additionalCost) => additionalCost === state[action.departmentIndex].positions[action.positionIndex].addionalCosts[action.additionalCostIndex] ? Object.assign({}, additionalCost, { calculationType: action.calculationType }):additionalCost);\r\n\t\t\treturn state.map((item) =>\r\n\t\t\t\titem === state[action.departmentIndex]\r\n\t\t\t\t\t? Object.assign({}, item, {\r\n\t\t\t\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\t\t\t\tposition ===\r\n\t\t\t\t\t\t\t\tstate[action.departmentIndex].positions[action.positionIndex]\r\n\t\t\t\t\t\t\t\t\t? Object.assign({}, position, {\r\n\t\t\t\t\t\t\t\t\t\t\taddionalCosts: additionCostWithUpdatedType, \r\n\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t: position\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t  })\r\n\t\t\t\t\t: item\r\n\t\t\t);\r\n\t\t\r\n\t\tcase types.RESET_ALL_COUNTS_AND_ADDITIONAL_COSTS:\r\n\t\t\treturn state.map((item)=>Object.assign({}, item, {\r\n\t\t\t\tpositions: item.positions.map((position) =>\r\n\t\t\t\t\tObject.assign({}, position, {\r\n\t\t\t\t\t\tcount:0,\r\n\t\t\t\t\t\taddionalCosts: undefined, \r\n\t\t\t})\r\n\t\t\t\t),\r\n\t\t\t}))\r\n\t\t\r\n\t\tcase types.RESET_DEPARTMENTS:\r\n\t\t\treturn [];\r\n\r\n\t\tcase types.LOAD_DEPARTMENTS_STATE_FROM_JSON:\r\n\t\t\tconsole.log(JSON.parse(action.json));\r\n\t\t\treturn JSON.parse(action.json);\r\n\t\t\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default departmentReducer;\r\n","import types from \"../types/activeScreenTypes\";\r\n\r\ninterface ActiveScreen {\r\n\tshowCalculator: boolean;\r\n\tshowWorkers: boolean;\r\n\tshowEdition: boolean;\r\n}\r\n\r\nconst INITIAL_STATE: ActiveScreen = {\r\n\tshowCalculator: true,\r\n\tshowWorkers: false,\r\n\tshowEdition: false,\r\n};\r\n\r\nconst activeScreenReducer = (\r\n\tstate = INITIAL_STATE,\r\n\taction: any\r\n): ActiveScreen => {\r\n\tswitch (action.type) {\r\n\t\tcase types.SHOW_CALCULATOR_SCREEN:\r\n\t\t\treturn {\r\n\t\t\t\tshowCalculator: true,\r\n\t\t\t\tshowWorkers: false,\r\n\t\t\t\tshowEdition: false,\r\n\t\t\t};\r\n\r\n\t\tcase types.SHOW_WORKERS_SCREEN:\r\n\t\t\treturn {\r\n\t\t\t\tshowCalculator: false,\r\n\t\t\t\tshowWorkers: true,\r\n\t\t\t\tshowEdition: false,\r\n\t\t\t};\r\n\r\n\t\tcase types.SHOW_EDITION_SCREEN:\r\n\t\t\treturn {\r\n\t\t\t\tshowCalculator: false,\r\n\t\t\t\tshowWorkers: false,\r\n\t\t\t\tshowEdition: true,\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n};\r\n\r\nexport default activeScreenReducer;\r\n","import { combineReducers } from 'redux';\r\nimport departmentsReducer from './departmentsReducer'\r\nimport activeScreenReducer from './activeScreenReducer';\r\nconst rootReducer = combineReducers({\r\n  departments: departmentsReducer,\r\n  activeScreen: activeScreenReducer\r\n});\r\n\r\nexport default rootReducer;\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\nimport { createStore } from \"redux\";\r\nimport { Provider, batch } from \"react-redux\";\r\nimport rootReducer from \"./reducers/rootReducer\";\r\nimport departmentsActions from \"./actions/departmentsActions\";\r\nconst { remote } = require(\"electron\");\r\nconst dbInstance = remote.getGlobal(\"db\");\r\nconst { ipcRenderer } = require('electron');\r\n\r\n\r\n\r\n\r\nipcRenderer.on('newFile', () => {\r\n  store.dispatch(departmentsActions.resetAllPricesAndAdditionalCosts());\r\n})\r\n\r\nipcRenderer.on('saveFile', () => {\r\n  const fs = require(\"fs\");\r\n  const { dialog } = require(\"electron\").remote;\r\n  dialog\r\n\t\t\t\t.showSaveDialog(() => {})\r\n\t\t\t\t.then((file: any) =>\r\n\t\t\t\t\tfile.filePath.endsWith(\".json\")\r\n\t\t\t\t\t\t? fs.writeFileSync(file.filePath, store)\r\n\t\t\t\t\t\t: file.filePath===\"\"?\"\":fs.writeFileSync(file.filePath + \".json\", JSON.stringify(store.getState().departments))\t\r\n\t\t\t\t);\r\n})\r\n\r\nipcRenderer.on('openFile', () => {\r\n  const fs = require(\"fs\");\r\n  const { dialog } = require(\"electron\").remote;\r\n  dialog\r\n  .showOpenDialog({filters: [\r\n    { name: 'Kosztorex', extensions: ['json'] },\r\n    { name: 'All Files', extensions: ['*'] }\r\n  ]}).then((file: any) => {\r\n      if (!file.canceled) {\r\n        let data = fs.readFileSync(file.filePaths[0]);\r\n        store.dispatch(departmentsActions.loadDepartmentsStateFromJSON(data));\r\n      }\r\n  });\r\n})\r\n\r\n\r\nconst convertPositionsToState = (positions: any) => {\r\n  let departments = Object.keys(positions);\r\n  batch(()=>{ departments.forEach((name, idx) => {\r\n    store.dispatch(departmentsActions.addDepartment(name));\r\n    positions[name].forEach((position: any) =>\r\n      store.dispatch(\r\n        departmentsActions.addPositionToDepartment(\r\n          idx,\r\n          position.name,\r\n          position.unit,\r\n          position.price,\r\n          position._id,\r\n        )\r\n      )\r\n    );\r\n  })})\r\n \r\n};\r\n\r\nlet store = createStore(rootReducer);\r\n\r\ndbInstance.populatePositionsIfEmpty().then(() => (dbInstance.getSortedPositions().then((positions: any) => convertPositionsToState(positions))));\r\n\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<Provider store={store}>\r\n\t\t\t<App />\r\n\t\t</Provider>\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById(\"root\")\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}